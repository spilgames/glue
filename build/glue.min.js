var requirejs,require,define;!function(global){function isFunction(a){return"[object Function]"===ostring.call(a)}function isArray(a){return"[object Array]"===ostring.call(a)}function each(a,b){if(a){var c;for(c=0;c<a.length&&(!a[c]||!b(a[c],c,a));c+=1);}}function eachReverse(a,b){if(a){var c;for(c=a.length-1;c>-1&&(!a[c]||!b(a[c],c,a));c-=1);}}function hasProp(a,b){return hasOwn.call(a,b)}function getOwn(a,b){return hasProp(a,b)&&a[b]}function eachProp(a,b){var c;for(c in a)if(hasProp(a,c)&&b(a[c],c))break}function mixin(a,b,c,d){return b&&eachProp(b,function(b,e){(c||!hasProp(a,e))&&(d&&"string"!=typeof b?(a[e]||(a[e]={}),mixin(a[e],b,c,d)):a[e]=b)}),a}function bind(a,b){return function(){return b.apply(a,arguments)}}function scripts(){return document.getElementsByTagName("script")}function defaultOnError(a){throw a}function getGlobal(a){if(!a)return a;var b=global;return each(a.split("."),function(a){b=b[a]}),b}function makeError(a,b,c,d){var e=new Error(b+"\nhttp://requirejs.org/docs/errors.html#"+a);return e.requireType=a,e.requireModules=d,c&&(e.originalError=c),e}function newContext(a){function b(a){var b,c;for(b=0;a[b];b+=1)if(c=a[b],"."===c)a.splice(b,1),b-=1;else if(".."===c){if(1===b&&(".."===a[2]||".."===a[0]))break;b>0&&(a.splice(b-1,2),b-=2)}}function c(a,c,d){var e,f,g,h,i,j,k,l,m,n,o,p=c&&c.split("/"),q=p,r=x.map,s=r&&r["*"];if(a&&"."===a.charAt(0)&&(c?(q=getOwn(x.pkgs,c)?p=[c]:p.slice(0,p.length-1),a=q.concat(a.split("/")),b(a),f=getOwn(x.pkgs,e=a[0]),a=a.join("/"),f&&a===e+"/"+f.main&&(a=e)):0===a.indexOf("./")&&(a=a.substring(2))),d&&r&&(p||s)){for(h=a.split("/"),i=h.length;i>0;i-=1){if(k=h.slice(0,i).join("/"),p)for(j=p.length;j>0;j-=1)if(g=getOwn(r,p.slice(0,j).join("/")),g&&(g=getOwn(g,k))){l=g,m=i;break}if(l)break;!n&&s&&getOwn(s,k)&&(n=getOwn(s,k),o=i)}!l&&n&&(l=n,m=o),l&&(h.splice(0,m,l),a=h.join("/"))}return a}function d(a){isBrowser&&each(scripts(),function(b){return b.getAttribute("data-requiremodule")===a&&b.getAttribute("data-requirecontext")===u.contextName?(b.parentNode.removeChild(b),!0):void 0})}function e(a){var b=getOwn(x.paths,a);return b&&isArray(b)&&b.length>1?(b.shift(),u.require.undef(a),u.require([a]),!0):void 0}function f(a){var b,c=a?a.indexOf("!"):-1;return c>-1&&(b=a.substring(0,c),a=a.substring(c+1,a.length)),[b,a]}function g(a,b,d,e){var g,h,i,j,k=null,l=b?b.name:null,m=a,n=!0,o="";return a||(n=!1,a="_@r"+(E+=1)),j=f(a),k=j[0],a=j[1],k&&(k=c(k,l,e),h=getOwn(C,k)),a&&(k?o=h&&h.normalize?h.normalize(a,function(a){return c(a,l,e)}):c(a,l,e):(o=c(a,l,e),j=f(o),k=j[0],o=j[1],d=!0,g=u.nameToUrl(o))),i=!k||h||d?"":"_unnormalized"+(F+=1),{prefix:k,name:o,parentMap:b,unnormalized:!!i,url:g,originalName:m,isDefine:n,id:(k?k+"!"+o:o)+i}}function h(a){var b=a.id,c=getOwn(y,b);return c||(c=y[b]=new u.Module(a)),c}function i(a,b,c){var d=a.id,e=getOwn(y,d);!hasProp(C,d)||e&&!e.defineEmitComplete?(e=h(a),e.error&&"error"===b?c(e.error):e.on(b,c)):"defined"===b&&c(C[d])}function j(a,b){var c=a.requireModules,d=!1;b?b(a):(each(c,function(b){var c=getOwn(y,b);c&&(c.error=a,c.events.error&&(d=!0,c.emit("error",a)))}),d||req.onError(a))}function k(){globalDefQueue.length&&(apsp.apply(B,[B.length-1,0].concat(globalDefQueue)),globalDefQueue=[])}function l(a){delete y[a],delete z[a]}function m(a,b,c){var d=a.map.id;a.error?a.emit("error",a.error):(b[d]=!0,each(a.depMaps,function(d,e){var f=d.id,g=getOwn(y,f);!g||a.depMatched[e]||c[f]||(getOwn(b,f)?(a.defineDep(e,C[f]),a.check()):m(g,b,c))}),c[d]=!0)}function n(){var a,b,c,f,g=1e3*x.waitSeconds,h=g&&u.startTime+g<(new Date).getTime(),i=[],k=[],l=!1,o=!0;if(!s){if(s=!0,eachProp(z,function(c){if(a=c.map,b=a.id,c.enabled&&(a.isDefine||k.push(c),!c.error))if(!c.inited&&h)e(b)?(f=!0,l=!0):(i.push(b),d(b));else if(!c.inited&&c.fetched&&a.isDefine&&(l=!0,!a.prefix))return o=!1}),h&&i.length)return c=makeError("timeout","Load timeout for modules: "+i,null,i),c.contextName=u.contextName,j(c);o&&each(k,function(a){m(a,{},{})}),h&&!f||!l||!isBrowser&&!isWebWorker||w||(w=setTimeout(function(){w=0,n()},50)),s=!1}}function o(a){hasProp(C,a[0])||h(g(a[0],null,!0)).init(a[1],a[2])}function p(a,b,c,d){a.detachEvent&&!isOpera?d&&a.detachEvent(d,b):a.removeEventListener(c,b,!1)}function q(a){var b=a.currentTarget||a.srcElement;return p(b,u.onScriptLoad,"load","onreadystatechange"),p(b,u.onScriptError,"error"),{node:b,id:b&&b.getAttribute("data-requiremodule")}}function r(){var a;for(k();B.length;){if(a=B.shift(),null===a[0])return j(makeError("mismatch","Mismatched anonymous define() module: "+a[a.length-1]));o(a)}}var s,t,u,v,w,x={waitSeconds:7,baseUrl:"./",paths:{},pkgs:{},shim:{},config:{}},y={},z={},A={},B=[],C={},D={},E=1,F=1;return v={require:function(a){return a.require?a.require:a.require=u.makeRequire(a.map)},exports:function(a){return a.usingExports=!0,a.map.isDefine?a.exports?a.exports:a.exports=C[a.map.id]={}:void 0},module:function(a){return a.module?a.module:a.module={id:a.map.id,uri:a.map.url,config:function(){var b,c=getOwn(x.pkgs,a.map.id);return b=c?getOwn(x.config,a.map.id+"/"+c.main):getOwn(x.config,a.map.id),b||{}},exports:C[a.map.id]}}},t=function(a){this.events=getOwn(A,a.id)||{},this.map=a,this.shim=getOwn(x.shim,a.id),this.depExports=[],this.depMaps=[],this.depMatched=[],this.pluginMaps={},this.depCount=0},t.prototype={init:function(a,b,c,d){d=d||{},this.inited||(this.factory=b,c?this.on("error",c):this.events.error&&(c=bind(this,function(a){this.emit("error",a)})),this.depMaps=a&&a.slice(0),this.errback=c,this.inited=!0,this.ignore=d.ignore,d.enabled||this.enabled?this.enable():this.check())},defineDep:function(a,b){this.depMatched[a]||(this.depMatched[a]=!0,this.depCount-=1,this.depExports[a]=b)},fetch:function(){if(!this.fetched){this.fetched=!0,u.startTime=(new Date).getTime();var a=this.map;return this.shim?(u.makeRequire(this.map,{enableBuildCallback:!0})(this.shim.deps||[],bind(this,function(){return a.prefix?this.callPlugin():this.load()})),void 0):a.prefix?this.callPlugin():this.load()}},load:function(){var a=this.map.url;D[a]||(D[a]=!0,u.load(this.map.id,a))},check:function(){if(this.enabled&&!this.enabling){var a,b,c=this.map.id,d=this.depExports,e=this.exports,f=this.factory;if(this.inited){if(this.error)this.emit("error",this.error);else if(!this.defining){if(this.defining=!0,this.depCount<1&&!this.defined){if(isFunction(f)){if(this.events.error&&this.map.isDefine||req.onError!==defaultOnError)try{e=u.execCb(c,f,d,e)}catch(g){a=g}else e=u.execCb(c,f,d,e);if(this.map.isDefine&&(b=this.module,b&&void 0!==b.exports&&b.exports!==this.exports?e=b.exports:void 0===e&&this.usingExports&&(e=this.exports)),a)return a.requireMap=this.map,a.requireModules=this.map.isDefine?[this.map.id]:null,a.requireType=this.map.isDefine?"define":"require",j(this.error=a)}else e=f;this.exports=e,this.map.isDefine&&!this.ignore&&(C[c]=e,req.onResourceLoad&&req.onResourceLoad(u,this.map,this.depMaps)),l(c),this.defined=!0}this.defining=!1,this.defined&&!this.defineEmitted&&(this.defineEmitted=!0,this.emit("defined",this.exports),this.defineEmitComplete=!0)}}else this.fetch()}},callPlugin:function(){var a=this.map,b=a.id,d=g(a.prefix);this.depMaps.push(d),i(d,"defined",bind(this,function(d){var e,f,k,m=this.map.name,n=this.map.parentMap?this.map.parentMap.name:null,o=u.makeRequire(a.parentMap,{enableBuildCallback:!0});return this.map.unnormalized?(d.normalize&&(m=d.normalize(m,function(a){return c(a,n,!0)})||""),f=g(a.prefix+"!"+m,this.map.parentMap),i(f,"defined",bind(this,function(a){this.init([],function(){return a},null,{enabled:!0,ignore:!0})})),k=getOwn(y,f.id),k&&(this.depMaps.push(f),this.events.error&&k.on("error",bind(this,function(a){this.emit("error",a)})),k.enable()),void 0):(e=bind(this,function(a){this.init([],function(){return a},null,{enabled:!0})}),e.error=bind(this,function(a){this.inited=!0,this.error=a,a.requireModules=[b],eachProp(y,function(a){0===a.map.id.indexOf(b+"_unnormalized")&&l(a.map.id)}),j(a)}),e.fromText=bind(this,function(c,d){var f=a.name,i=g(f),k=useInteractive;d&&(c=d),k&&(useInteractive=!1),h(i),hasProp(x.config,b)&&(x.config[f]=x.config[b]);try{req.exec(c)}catch(l){return j(makeError("fromtexteval","fromText eval for "+b+" failed: "+l,l,[b]))}k&&(useInteractive=!0),this.depMaps.push(i),u.completeLoad(f),o([f],e)}),d.load(a.name,o,e,x),void 0)})),u.enable(d,this),this.pluginMaps[d.id]=d},enable:function(){z[this.map.id]=this,this.enabled=!0,this.enabling=!0,each(this.depMaps,bind(this,function(a,b){var c,d,e;if("string"==typeof a){if(a=g(a,this.map.isDefine?this.map:this.map.parentMap,!1,!this.skipMap),this.depMaps[b]=a,e=getOwn(v,a.id))return this.depExports[b]=e(this),void 0;this.depCount+=1,i(a,"defined",bind(this,function(a){this.defineDep(b,a),this.check()})),this.errback&&i(a,"error",bind(this,this.errback))}c=a.id,d=y[c],hasProp(v,c)||!d||d.enabled||u.enable(a,this)})),eachProp(this.pluginMaps,bind(this,function(a){var b=getOwn(y,a.id);b&&!b.enabled&&u.enable(a,this)})),this.enabling=!1,this.check()},on:function(a,b){var c=this.events[a];c||(c=this.events[a]=[]),c.push(b)},emit:function(a,b){each(this.events[a],function(a){a(b)}),"error"===a&&delete this.events[a]}},u={config:x,contextName:a,registry:y,defined:C,urlFetched:D,defQueue:B,Module:t,makeModuleMap:g,nextTick:req.nextTick,onError:j,configure:function(a){a.baseUrl&&"/"!==a.baseUrl.charAt(a.baseUrl.length-1)&&(a.baseUrl+="/");var b=x.pkgs,c=x.shim,d={paths:!0,config:!0,map:!0};eachProp(a,function(a,b){d[b]?"map"===b?(x.map||(x.map={}),mixin(x[b],a,!0,!0)):mixin(x[b],a,!0):x[b]=a}),a.shim&&(eachProp(a.shim,function(a,b){isArray(a)&&(a={deps:a}),!a.exports&&!a.init||a.exportsFn||(a.exportsFn=u.makeShimExports(a)),c[b]=a}),x.shim=c),a.packages&&(each(a.packages,function(a){var c;a="string"==typeof a?{name:a}:a,c=a.location,b[a.name]={name:a.name,location:c||a.name,main:(a.main||"main").replace(currDirRegExp,"").replace(jsSuffixRegExp,"")}}),x.pkgs=b),eachProp(y,function(a,b){a.inited||a.map.unnormalized||(a.map=g(b))}),(a.deps||a.callback)&&u.require(a.deps||[],a.callback)},makeShimExports:function(a){function b(){var b;return a.init&&(b=a.init.apply(global,arguments)),b||a.exports&&getGlobal(a.exports)}return b},makeRequire:function(b,e){function f(c,d,i){var k,l,m;return e.enableBuildCallback&&d&&isFunction(d)&&(d.__requireJsBuild=!0),"string"==typeof c?isFunction(d)?j(makeError("requireargs","Invalid require call"),i):b&&hasProp(v,c)?v[c](y[b.id]):req.get?req.get(u,c,b,f):(l=g(c,b,!1,!0),k=l.id,hasProp(C,k)?C[k]:j(makeError("notloaded",'Module name "'+k+'" has not been loaded yet for context: '+a+(b?"":". Use require([])")))):(r(),u.nextTick(function(){r(),m=h(g(null,b)),m.skipMap=e.skipMap,m.init(c,d,i,{enabled:!0}),n()}),f)}return e=e||{},mixin(f,{isBrowser:isBrowser,toUrl:function(a){var d,e=a.lastIndexOf("."),f=a.split("/")[0],g="."===f||".."===f;return-1!==e&&(!g||e>1)&&(d=a.substring(e,a.length),a=a.substring(0,e)),u.nameToUrl(c(a,b&&b.id,!0),d,!0)},defined:function(a){return hasProp(C,g(a,b,!1,!0).id)},specified:function(a){return a=g(a,b,!1,!0).id,hasProp(C,a)||hasProp(y,a)}}),b||(f.undef=function(a){k();var c=g(a,b,!0),e=getOwn(y,a);d(a),delete C[a],delete D[c.url],delete A[a],e&&(e.events.defined&&(A[a]=e.events),l(a))}),f},enable:function(a){var b=getOwn(y,a.id);b&&h(a).enable()},completeLoad:function(a){var b,c,d,f=getOwn(x.shim,a)||{},g=f.exports;for(k();B.length;){if(c=B.shift(),null===c[0]){if(c[0]=a,b)break;b=!0}else c[0]===a&&(b=!0);o(c)}if(d=getOwn(y,a),!b&&!hasProp(C,a)&&d&&!d.inited){if(!(!x.enforceDefine||g&&getGlobal(g)))return e(a)?void 0:j(makeError("nodefine","No define call for "+a,null,[a]));o([a,f.deps||[],f.exportsFn])}n()},nameToUrl:function(a,b,c){var d,e,f,g,h,i,j,k,l;if(req.jsExtRegExp.test(a))k=a+(b||"");else{for(d=x.paths,e=x.pkgs,h=a.split("/"),i=h.length;i>0;i-=1){if(j=h.slice(0,i).join("/"),f=getOwn(e,j),l=getOwn(d,j)){isArray(l)&&(l=l[0]),h.splice(0,i,l);break}if(f){g=a===f.name?f.location+"/"+f.main:f.location,h.splice(0,i,g);break}}k=h.join("/"),k+=b||(/^data\:|\?/.test(k)||c?"":".js"),k=("/"===k.charAt(0)||k.match(/^[\w\+\.\-]+:/)?"":x.baseUrl)+k}return x.urlArgs?k+((-1===k.indexOf("?")?"?":"&")+x.urlArgs):k},load:function(a,b){req.load(u,a,b)},execCb:function(a,b,c,d){return b.apply(d,c)},onScriptLoad:function(a){if("load"===a.type||readyRegExp.test((a.currentTarget||a.srcElement).readyState)){interactiveScript=null;var b=q(a);u.completeLoad(b.id)}},onScriptError:function(a){var b=q(a);return e(b.id)?void 0:j(makeError("scripterror","Script error for: "+b.id,a,[b.id]))}},u.require=u.makeRequire(),u}function getInteractiveScript(){return interactiveScript&&"interactive"===interactiveScript.readyState?interactiveScript:(eachReverse(scripts(),function(a){return"interactive"===a.readyState?interactiveScript=a:void 0}),interactiveScript)}var req,s,head,baseElement,dataMain,src,interactiveScript,currentlyAddingScript,mainScript,subPath,version="2.1.9",commentRegExp=/(\/\*([\s\S]*?)\*\/|([^:]|^)\/\/(.*)$)/gm,cjsRequireRegExp=/[^.]\s*require\s*\(\s*["']([^'"\s]+)["']\s*\)/g,jsSuffixRegExp=/\.js$/,currDirRegExp=/^\.\//,op=Object.prototype,ostring=op.toString,hasOwn=op.hasOwnProperty,ap=Array.prototype,apsp=ap.splice,isBrowser=!("undefined"==typeof window||"undefined"==typeof navigator||!window.document),isWebWorker=!isBrowser&&"undefined"!=typeof importScripts,readyRegExp=isBrowser&&"PLAYSTATION 3"===navigator.platform?/^complete$/:/^(complete|loaded)$/,defContextName="_",isOpera="undefined"!=typeof opera&&"[object Opera]"===opera.toString(),contexts={},cfg={},globalDefQueue=[],useInteractive=!1;if("undefined"==typeof define){if("undefined"!=typeof requirejs){if(isFunction(requirejs))return;cfg=requirejs,requirejs=void 0}"undefined"==typeof require||isFunction(require)||(cfg=require,require=void 0),req=requirejs=function(a,b,c,d){var e,f,g=defContextName;return isArray(a)||"string"==typeof a||(f=a,isArray(b)?(a=b,b=c,c=d):a=[]),f&&f.context&&(g=f.context),e=getOwn(contexts,g),e||(e=contexts[g]=req.s.newContext(g)),f&&e.configure(f),e.require(a,b,c)},req.config=function(a){return req(a)},req.nextTick="undefined"!=typeof setTimeout?function(a){setTimeout(a,4)}:function(a){a()},require||(require=req),req.version=version,req.jsExtRegExp=/^\/|:|\?|\.js$/,req.isBrowser=isBrowser,s=req.s={contexts:contexts,newContext:newContext},req({}),each(["toUrl","undef","defined","specified"],function(a){req[a]=function(){var b=contexts[defContextName];return b.require[a].apply(b,arguments)}}),isBrowser&&(head=s.head=document.getElementsByTagName("head")[0],baseElement=document.getElementsByTagName("base")[0],baseElement&&(head=s.head=baseElement.parentNode)),req.onError=defaultOnError,req.createNode=function(a){var b=a.xhtml?document.createElementNS("http://www.w3.org/1999/xhtml","html:script"):document.createElement("script");return b.type=a.scriptType||"text/javascript",b.charset="utf-8",b.async=!0,b},req.load=function(a,b,c){var d,e=a&&a.config||{};if(isBrowser)return d=req.createNode(e,b,c),d.setAttribute("data-requirecontext",a.contextName),d.setAttribute("data-requiremodule",b),!d.attachEvent||d.attachEvent.toString&&d.attachEvent.toString().indexOf("[native code")<0||isOpera?(d.addEventListener("load",a.onScriptLoad,!1),d.addEventListener("error",a.onScriptError,!1)):(useInteractive=!0,d.attachEvent("onreadystatechange",a.onScriptLoad)),d.src=c,currentlyAddingScript=d,baseElement?head.insertBefore(d,baseElement):head.appendChild(d),currentlyAddingScript=null,d;if(isWebWorker)try{importScripts(c),a.completeLoad(b)}catch(f){a.onError(makeError("importscripts","importScripts failed for "+b+" at "+c,f,[b]))}},isBrowser&&!cfg.skipDataMain&&eachReverse(scripts(),function(a){return head||(head=a.parentNode),dataMain=a.getAttribute("data-main"),dataMain?(mainScript=dataMain,cfg.baseUrl||(src=mainScript.split("/"),mainScript=src.pop(),subPath=src.length?src.join("/")+"/":"./",cfg.baseUrl=subPath),mainScript=mainScript.replace(jsSuffixRegExp,""),req.jsExtRegExp.test(mainScript)&&(mainScript=dataMain),cfg.deps=cfg.deps?cfg.deps.concat(mainScript):[mainScript],!0):void 0}),define=function(a,b,c){var d,e;"string"!=typeof a&&(c=b,b=a,a=null),isArray(b)||(c=b,b=null),!b&&isFunction(c)&&(b=[],c.length&&(c.toString().replace(commentRegExp,"").replace(cjsRequireRegExp,function(a,c){b.push(c)}),b=(1===c.length?["require"]:["require","exports","module"]).concat(b))),useInteractive&&(d=currentlyAddingScript||getInteractiveScript(),d&&(a||(a=d.getAttribute("data-requiremodule")),e=contexts[d.getAttribute("data-requirecontext")])),(e?e.defQueue:globalDefQueue).push([a,b,c])},define.amd={jQuery:!0},req.exec=function(text){return eval(text)},req(cfg)}}(this);var spine={};spine.BoneData=function(a,b){this.name=a,this.parent=b},spine.BoneData.prototype={length:0,x:0,y:0,rotation:0,scaleX:1,scaleY:1,inheritScale:!0,inheritRotation:!0},spine.SlotData=function(a,b){this.name=a,this.boneData=b},spine.SlotData.prototype={r:1,g:1,b:1,a:1,attachmentName:null,additiveBlending:!1},spine.Bone=function(a,b){this.data=a,this.parent=b,this.setToSetupPose()},spine.Bone.yDown=!1,spine.Bone.prototype={x:0,y:0,rotation:0,scaleX:1,scaleY:1,m00:0,m01:0,worldX:0,m10:0,m11:0,worldY:0,worldRotation:0,worldScaleX:1,worldScaleY:1,updateWorldTransform:function(a,b){var c=this.parent;null!=c?(this.worldX=this.x*c.m00+this.y*c.m01+c.worldX,this.worldY=this.x*c.m10+this.y*c.m11+c.worldY,this.data.inheritScale?(this.worldScaleX=c.worldScaleX*this.scaleX,this.worldScaleY=c.worldScaleY*this.scaleY):(this.worldScaleX=this.scaleX,this.worldScaleY=this.scaleY),this.worldRotation=this.data.inheritRotation?c.worldRotation+this.rotation:this.rotation):(this.worldX=this.x,this.worldY=this.y,this.worldScaleX=this.scaleX,this.worldScaleY=this.scaleY,this.worldRotation=this.rotation);var d=this.worldRotation*Math.PI/180,e=Math.cos(d),f=Math.sin(d);this.m00=e*this.worldScaleX,this.m10=f*this.worldScaleX,this.m01=-f*this.worldScaleY,this.m11=e*this.worldScaleY,a&&(this.m00=-this.m00,this.m01=-this.m01),b!=spine.Bone.yDown&&(this.m10=-this.m10,this.m11=-this.m11)},setToSetupPose:function(){var a=this.data;this.x=a.x,this.y=a.y,this.rotation=a.rotation,this.scaleX=a.scaleX,this.scaleY=a.scaleY}},spine.Slot=function(a,b,c){this.data=a,this.skeleton=b,this.bone=c,this.setToSetupPose()},spine.Slot.prototype={r:1,g:1,b:1,a:1,_attachmentTime:0,attachment:null,setAttachment:function(a){this.attachment=a,this._attachmentTime=this.skeleton.time},setAttachmentTime:function(a){this._attachmentTime=this.skeleton.time-a},getAttachmentTime:function(){return this.skeleton.time-this._attachmentTime},setToSetupPose:function(){var a=this.data;this.r=a.r,this.g=a.g,this.b=a.b,this.a=a.a;for(var b=this.skeleton.data.slots,c=0,d=b.length;d>c;c++)if(b[c]==a){this.setAttachment(a.attachmentName?this.skeleton.getAttachmentBySlotIndex(c,a.attachmentName):null);break}}},spine.Skin=function(a){this.name=a,this.attachments={}},spine.Skin.prototype={addAttachment:function(a,b,c){this.attachments[a+":"+b]=c},getAttachment:function(a,b){return this.attachments[a+":"+b]},_attachAll:function(a,b){for(var c in b.attachments){var d=c.indexOf(":"),e=parseInt(c.substring(0,d)),f=c.substring(d+1),g=a.slots[e];if(g.attachment&&g.attachment.name==f){var h=this.getAttachment(e,f);h&&g.setAttachment(h)}}}},spine.Animation=function(a,b,c){this.name=a,this.timelines=b,this.duration=c},spine.Animation.prototype={apply:function(a,b,c,d,e){d&&0!=this.duration&&(c%=this.duration,b%=this.duration);for(var f=this.timelines,g=0,h=f.length;h>g;g++)f[g].apply(a,b,c,e,1)},mix:function(a,b,c,d,e,f){d&&0!=this.duration&&(c%=this.duration,b%=this.duration);for(var g=this.timelines,h=0,i=g.length;i>h;h++)g[h].apply(a,b,c,e,f)}},spine.binarySearch=function(a,b,c){var d=0,e=Math.floor(a.length/c)-2;if(0==e)return c;for(var f=e>>>1;;){if(a[(f+1)*c]<=b?d=f+1:e=f,d==e)return(d+1)*c;f=d+e>>>1}},spine.linearSearch=function(a,b,c){for(var d=0,e=a.length-c;e>=d;d+=c)if(a[d]>b)return d;return-1},spine.Curves=function(a){this.curves=[],this.curves.length=6*(a-1)},spine.Curves.prototype={setLinear:function(a){this.curves[6*a]=0},setStepped:function(a){this.curves[6*a]=-1},setCurve:function(a,b,c,d,e){var f=.1,g=f*f,h=g*f,i=3*f,j=3*g,k=6*g,l=6*h,m=2*-b+d,n=2*-c+e,o=3*(b-d)+1,p=3*(c-e)+1,q=6*a,r=this.curves;r[q]=b*i+m*j+o*h,r[q+1]=c*i+n*j+p*h,r[q+2]=m*k+o*l,r[q+3]=n*k+p*l,r[q+4]=o*l,r[q+5]=p*l},getCurvePercent:function(a,b){b=0>b?0:b>1?1:b;var c=6*a,d=this.curves,e=d[c];if(!e)return b;if(-1==e)return 0;for(var f=d[c+1],g=d[c+2],h=d[c+3],i=d[c+4],j=d[c+5],k=e,l=f,m=8;;){if(k>=b){var n=k-e,o=l-f;return o+(l-o)*(b-n)/(k-n)}if(0==m)break;m--,e+=g,f+=h,g+=i,h+=j,k+=e,l+=f}return l+(1-l)*(b-k)/(1-k)}},spine.RotateTimeline=function(a){this.curves=new spine.Curves(a),this.frames=[],this.frames.length=2*a},spine.RotateTimeline.prototype={boneIndex:0,getFrameCount:function(){return this.frames.length/2},setFrame:function(a,b,c){a*=2,this.frames[a]=b,this.frames[a+1]=c},apply:function(a,b,c,d,e){var f=this.frames;if(!(c<f[0])){var g=a.bones[this.boneIndex];if(c>=f[f.length-2]){for(var h=g.data.rotation+f[f.length-1]-g.rotation;h>180;)h-=360;for(;-180>h;)h+=360;return g.rotation+=h*e,void 0}var i=spine.binarySearch(f,c,2),j=f[i-1],k=f[i],l=1-(c-k)/(f[i-2]-k);l=this.curves.getCurvePercent(i/2-1,l);for(var h=f[i+1]-j;h>180;)h-=360;for(;-180>h;)h+=360;for(h=g.data.rotation+(j+h*l)-g.rotation;h>180;)h-=360;for(;-180>h;)h+=360;g.rotation+=h*e}}},spine.TranslateTimeline=function(a){this.curves=new spine.Curves(a),this.frames=[],this.frames.length=3*a},spine.TranslateTimeline.prototype={boneIndex:0,getFrameCount:function(){return this.frames.length/3},setFrame:function(a,b,c,d){a*=3,this.frames[a]=b,this.frames[a+1]=c,this.frames[a+2]=d},apply:function(a,b,c,d,e){var f=this.frames;if(!(c<f[0])){var g=a.bones[this.boneIndex];if(c>=f[f.length-3])return g.x+=(g.data.x+f[f.length-2]-g.x)*e,g.y+=(g.data.y+f[f.length-1]-g.y)*e,void 0;var h=spine.binarySearch(f,c,3),i=f[h-2],j=f[h-1],k=f[h],l=1-(c-k)/(f[h+-3]-k);l=this.curves.getCurvePercent(h/3-1,l),g.x+=(g.data.x+i+(f[h+1]-i)*l-g.x)*e,g.y+=(g.data.y+j+(f[h+2]-j)*l-g.y)*e}}},spine.ScaleTimeline=function(a){this.curves=new spine.Curves(a),this.frames=[],this.frames.length=3*a},spine.ScaleTimeline.prototype={boneIndex:0,getFrameCount:function(){return this.frames.length/3},setFrame:function(a,b,c,d){a*=3,this.frames[a]=b,this.frames[a+1]=c,this.frames[a+2]=d},apply:function(a,b,c,d,e){var f=this.frames;if(!(c<f[0])){var g=a.bones[this.boneIndex];if(c>=f[f.length-3])return g.scaleX+=(g.data.scaleX-1+f[f.length-2]-g.scaleX)*e,g.scaleY+=(g.data.scaleY-1+f[f.length-1]-g.scaleY)*e,void 0;var h=spine.binarySearch(f,c,3),i=f[h-2],j=f[h-1],k=f[h],l=1-(c-k)/(f[h+-3]-k);l=this.curves.getCurvePercent(h/3-1,l),g.scaleX+=(g.data.scaleX-1+i+(f[h+1]-i)*l-g.scaleX)*e,g.scaleY+=(g.data.scaleY-1+j+(f[h+2]-j)*l-g.scaleY)*e}}},spine.ColorTimeline=function(a){this.curves=new spine.Curves(a),this.frames=[],this.frames.length=5*a},spine.ColorTimeline.prototype={slotIndex:0,getFrameCount:function(){return this.frames.length/5},setFrame:function(a,b,c,d,e,f){a*=5,this.frames[a]=b,this.frames[a+1]=c,this.frames[a+2]=d,this.frames[a+3]=e,this.frames[a+4]=f},apply:function(a,b,c,d,e){var f=this.frames;if(!(c<f[0])){var g=a.slots[this.slotIndex];if(c>=f[f.length-5]){var h=f.length-1;return g.r=f[h-3],g.g=f[h-2],g.b=f[h-1],g.a=f[h],void 0}var i=spine.binarySearch(f,c,5),j=f[i-4],k=f[i-3],l=f[i-2],m=f[i-1],n=f[i],o=1-(c-n)/(f[i-5]-n);o=this.curves.getCurvePercent(i/5-1,o);var p=j+(f[i+1]-j)*o,q=k+(f[i+2]-k)*o,r=l+(f[i+3]-l)*o,s=m+(f[i+4]-m)*o;1>e?(g.r+=(p-g.r)*e,g.g+=(q-g.g)*e,g.b+=(r-g.b)*e,g.a+=(s-g.a)*e):(g.r=p,g.g=q,g.b=r,g.a=s)}}},spine.AttachmentTimeline=function(a){this.curves=new spine.Curves(a),this.frames=[],this.frames.length=a,this.attachmentNames=[],this.attachmentNames.length=a},spine.AttachmentTimeline.prototype={slotIndex:0,getFrameCount:function(){return this.frames.length},setFrame:function(a,b,c){this.frames[a]=b,this.attachmentNames[a]=c},apply:function(a,b,c){var d=this.frames;if(!(c<d[0])){var e;e=c>=d[d.length-1]?d.length-1:spine.binarySearch(d,c,1)-1;var f=this.attachmentNames[e];a.slots[this.slotIndex].setAttachment(f?a.getAttachmentBySlotIndex(this.slotIndex,f):null)}}},spine.EventTimeline=function(a){this.frames=[],this.frames.length=a,this.events=[],this.events.length=a},spine.EventTimeline.prototype={getFrameCount:function(){return this.frames.length},setFrame:function(a,b,c){this.frames[a]=b,this.events[a]=c},apply:function(a,b,c,d,e){if(d){var f=this.frames,g=f.length;if(!(b>=f[g-1])){b>c&&(this.apply(a,b,Number.MAX_VALUE,d,e),b=0);var h;if(b<=f[0]||1==g)h=0;else{h=spine.binarySearch(f,b,1);for(var i=f[h];h>0&&f[h-1]==i;)h--}for(var j=this.events;g>h&&c>=f[h];h++)d.push(j[h])}}}},spine.DrawOrderTimeline=function(a){this.frames=[],this.frames.length=a,this.drawOrders=[],this.drawOrders.length=a},spine.DrawOrderTimeline.prototype={getFrameCount:function(){return this.frames.length},setFrame:function(a,b,c){this.frames[a]=b,this.drawOrders[a]=c},apply:function(a,b,c){var d=this.frames;if(!(c<d[0])){var e;e=c>=d[d.length-1]?d.length-1:spine.binarySearch(d,c,1)-1;var f=a.drawOrder,g=a.slots,h=this.drawOrders[e];if(h)for(var i=0,j=h.length;j>i;i++)f[i]=a.slots[h[i]];else for(var i=0,j=g.length;j>i;i++)f[i]=g[i]}}},spine.SkeletonData=function(){this.bones=[],this.slots=[],this.skins=[],this.events=[],this.animations=[]},spine.SkeletonData.prototype={defaultSkin:null,findBone:function(a){for(var b=this.bones,c=0,d=b.length;d>c;c++)if(b[c].name==a)return b[c];return null},findBoneIndex:function(a){for(var b=this.bones,c=0,d=b.length;d>c;c++)if(b[c].name==a)return c;return-1},findSlot:function(a){for(var b=this.slots,c=0,d=b.length;d>c;c++)if(b[c].name==a)return slot[c];return null},findSlotIndex:function(a){for(var b=this.slots,c=0,d=b.length;d>c;c++)if(b[c].name==a)return c;return-1},findSkin:function(a){for(var b=this.skins,c=0,d=b.length;d>c;c++)if(b[c].name==a)return b[c];return null},findEvent:function(a){for(var b=this.events,c=0,d=b.length;d>c;c++)if(b[c].name==a)return b[c];return null},findAnimation:function(a){for(var b=this.animations,c=0,d=b.length;d>c;c++)if(b[c].name==a)return b[c];return null}},spine.Skeleton=function(a){this.data=a,this.bones=[];for(var b=0,c=a.bones.length;c>b;b++){var d=a.bones[b],e=d.parent?this.bones[a.bones.indexOf(d.parent)]:null;this.bones.push(new spine.Bone(d,e))}this.slots=[],this.drawOrder=[];for(var b=0,c=a.slots.length;c>b;b++){var f=a.slots[b],g=this.bones[a.bones.indexOf(f.boneData)],h=new spine.Slot(f,this,g);this.slots.push(h),this.drawOrder.push(h)}},spine.Skeleton.prototype={x:0,y:0,skin:null,r:1,g:1,b:1,a:1,time:0,flipX:!1,flipY:!1,updateWorldTransform:function(){for(var a=this.flipX,b=this.flipY,c=this.bones,d=0,e=c.length;e>d;d++)c[d].updateWorldTransform(a,b)},setToSetupPose:function(){this.setBonesToSetupPose(),this.setSlotsToSetupPose()},setBonesToSetupPose:function(){for(var a=this.bones,b=0,c=a.length;c>b;b++)a[b].setToSetupPose()},setSlotsToSetupPose:function(){for(var a=this.slots,b=0,c=a.length;c>b;b++)a[b].setToSetupPose(b)},getRootBone:function(){return 0==this.bones.length?null:this.bones[0]},findBone:function(a){for(var b=this.bones,c=0,d=b.length;d>c;c++)if(b[c].data.name==a)return b[c];return null},findBoneIndex:function(a){for(var b=this.bones,c=0,d=b.length;d>c;c++)if(b[c].data.name==a)return c;return-1},findSlot:function(a){for(var b=this.slots,c=0,d=b.length;d>c;c++)if(b[c].data.name==a)return b[c];return null},findSlotIndex:function(a){for(var b=this.slots,c=0,d=b.length;d>c;c++)if(b[c].data.name==a)return c;return-1},setSkinByName:function(a){var b=this.data.findSkin(a);if(!b)throw"Skin not found: "+a;this.setSkin(b)},setSkin:function(a){this.skin&&a&&a._attachAll(this,this.skin),this.skin=a},getAttachmentBySlotName:function(a,b){return this.getAttachmentBySlotIndex(this.data.findSlotIndex(a),b)},getAttachmentBySlotIndex:function(a,b){if(this.skin){var c=this.skin.getAttachment(a,b);if(c)return c}return this.data.defaultSkin?this.data.defaultSkin.getAttachment(a,b):null},setAttachment:function(a,b){for(var c=this.slots,d=0,e=c.size;e>d;d++){var f=c[d];if(f.data.name==a){var g=null;if(b&&(g=this.getAttachment(d,b),!g))throw"Attachment not found: "+b+", for slot: "+a;return f.setAttachment(g),void 0}}throw"Slot not found: "+a},update:function(a){time+=a}},spine.EventData=function(a){this.name=a},spine.EventData.prototype={intValue:0,floatValue:0,stringValue:null},spine.Event=function(a){this.data=a},spine.Event.prototype={intValue:0,floatValue:0,stringValue:null},spine.AttachmentType={region:0,boundingbox:1},spine.RegionAttachment=function(a){this.name=a,this.offset=[],this.offset.length=8,this.uvs=[],this.uvs.length=8},spine.RegionAttachment.prototype={type:spine.AttachmentType.region,x:0,y:0,rotation:0,scaleX:1,scaleY:1,width:0,height:0,rendererObject:null,regionOffsetX:0,regionOffsetY:0,regionWidth:0,regionHeight:0,regionOriginalWidth:0,regionOriginalHeight:0,setUVs:function(a,b,c,d,e){var f=this.uvs;e?(f[2]=a,f[3]=d,f[4]=a,f[5]=b,f[6]=c,f[7]=b,f[0]=c,f[1]=d):(f[0]=a,f[1]=d,f[2]=a,f[3]=b,f[4]=c,f[5]=b,f[6]=c,f[7]=d)},updateOffset:function(){var a=this.width/this.regionOriginalWidth*this.scaleX,b=this.height/this.regionOriginalHeight*this.scaleY,c=-this.width/2*this.scaleX+this.regionOffsetX*a,d=-this.height/2*this.scaleY+this.regionOffsetY*b,e=c+this.regionWidth*a,f=d+this.regionHeight*b,g=this.rotation*Math.PI/180,h=Math.cos(g),i=Math.sin(g),j=c*h+this.x,k=c*i,l=d*h+this.y,m=d*i,n=e*h+this.x,o=e*i,p=f*h+this.y,q=f*i,r=this.offset;r[0]=j-m,r[1]=l+k,r[2]=j-q,r[3]=p+k,r[4]=n-q,r[5]=p+o,r[6]=n-m,r[7]=l+o},computeVertices:function(a,b,c,d){a+=c.worldX,b+=c.worldY;var e=c.m00,f=c.m01,g=c.m10,h=c.m11,i=this.offset;d[0]=i[0]*e+i[1]*f+a,d[1]=i[0]*g+i[1]*h+b,d[2]=i[2]*e+i[3]*f+a,d[3]=i[2]*g+i[3]*h+b,d[4]=i[4]*e+i[5]*f+a,d[5]=i[4]*g+i[5]*h+b,d[6]=i[6]*e+i[7]*f+a,d[7]=i[6]*g+i[7]*h+b}},spine.BoundingBoxAttachment=function(a){this.name=a,this.vertices=[]},spine.BoundingBoxAttachment.prototype={type:spine.AttachmentType.boundingBox,computeWorldVertices:function(a,b,c,d){a+=c.worldX,b+=c.worldY;for(var e=c.m00,f=c.m01,g=c.m10,h=c.m11,i=this.vertices,j=0,k=i.length;k>j;j+=2){var l=i[j],m=i[j+1];d[j]=l*e+m*f+a,d[j+1]=l*g+m*h+b}}},spine.AnimationStateData=function(a){this.skeletonData=a,this.animationToMixTime={}},spine.AnimationStateData.prototype={defaultMix:0,setMixByName:function(a,b,c){var d=this.skeletonData.findAnimation(a);if(!d)throw"Animation not found: "+a;var e=this.skeletonData.findAnimation(b);if(!e)throw"Animation not found: "+b;this.setMix(d,e,c)},setMix:function(a,b,c){this.animationToMixTime[a.name+":"+b.name]=c},getMix:function(a,b){var c=this.animationToMixTime[a.name+":"+b.name];return c?c:this.defaultMix}},spine.TrackEntry=function(){},spine.TrackEntry.prototype={next:null,previous:null,animation:null,loop:!1,delay:0,time:0,lastTime:0,endTime:0,timeScale:1,mixTime:0,mixDuration:0,onStart:null,onEnd:null,onComplete:null,onEvent:null},spine.AnimationState=function(a){this.data=a,this.tracks=[],this.events=[]},spine.AnimationState.prototype={onStart:null,onEnd:null,onComplete:null,onEvent:null,timeScale:1,update:function(a){a*=this.timeScale;for(var b=0;b<this.tracks.length;b++){var c=this.tracks[b];if(c){var d=a*c.timeScale,e=c.time+d,f=c.endTime;if(c.time=e,c.previous&&(c.previous.time+=d,c.mixTime+=d),c.loop?c.lastTime%f>e%f:c.lastTime<f&&e>=f){var g=Math.floor(e/f);c.onComplete&&c.onComplete(b,g),this.onComplete&&this.onComplete(b,g)}var h=c.next;h?e-d>h.delay&&this.setCurrent(b,h):!c.loop&&c.lastTime>=c.endTime&&this.clearTrack(b)}}},apply:function(a){for(var b=0;b<this.tracks.length;b++){var c=this.tracks[b];if(c){this.events.length=0;var d=c.time,e=c.loop;!e&&d>c.endTime&&(d=c.endTime);var f=c.previous;if(f){var g=f.time;!f.loop&&g>f.endTime&&(g=f.endTime),f.animation.apply(a,g,g,f.loop,null);var h=c.mixTime/c.mixDuration;h>=1&&(h=1,c.previous=null),c.animation.mix(a,c.lastTime,d,e,this.events,h)}else c.animation.apply(a,c.lastTime,d,e,this.events);
for(var i=0,j=this.events.length;j>i;i++){var k=this.events[i];null!=c.onEvent&&c.onEvent(b,k),null!=this.onEvent&&this.onEvent(b,k)}c.lastTime=c.time}}},clearTracks:function(){for(var a=0,b=this.tracks.length;b>a;a++)this.clearTrack(a);this.tracks.length=0},clearTrack:function(a){if(!(a>=this.tracks.length)){var b=this.tracks[a];b&&(null!=b.onEnd&&b.onEnd(a),null!=this.onEnd&&this.onEnd(a),this.tracks[a]=null)}},_expandToIndex:function(a){if(a<this.tracks.length)return this.tracks[a];for(;a>=this.tracks.length;)this.tracks.push(null);return null},setCurrent:function(a,b){var c=this._expandToIndex(a);c&&(c.previous=null,null!=c.onEnd&&c.onEnd(a),null!=this.onEnd&&this.onEnd(a),b.mixDuration=this.data.getMix(c.animation,b.animation),b.mixDuration>0&&(b.mixTime=0,b.previous=c)),this.tracks[a]=b,null!=b.onStart&&b.onStart(a),null!=this.onStart&&this.onStart(a)},setAnimationByName:function(a,b,c){var d=this.data.skeletonData.findAnimation(b);if(!d)throw"Animation not found: "+b;return this.setAnimation(a,d,c)},setAnimation:function(a,b,c){var d=new spine.TrackEntry;return d.animation=b,d.loop=c,d.endTime=b.duration,this.setCurrent(a,d),d},addAnimationByName:function(a,b,c,d){var e=this.data.skeletonData.findAnimation(b);if(!e)throw"Animation not found: "+b;return this.addAnimation(a,e,c,d)},addAnimation:function(a,b,c,d){var e=new spine.TrackEntry;e.animation=b,e.loop=c,e.endTime=b.duration;var f=this._expandToIndex(a);if(f){for(;f.next;)f=f.next;f.next=e}else this.tracks[a]=e;return 0>=d&&(f?d+=f.endTime-this.data.getMix(f.animation,b):d=0),e.delay=d,e},getCurrent:function(a){return a>=this.tracks.length?null:this.tracks[a]}},spine.SkeletonJson=function(a){this.attachmentLoader=a},spine.SkeletonJson.prototype={scale:1,readSkeletonData:function(a){for(var b=new spine.SkeletonData,c=a.bones,d=0,e=c.length;e>d;d++){var f=c[d],g=null;if(f.parent&&(g=b.findBone(f.parent),!g))throw"Parent bone not found: "+f.parent;var h=new spine.BoneData(f.name,g);h.length=(f.length||0)*this.scale,h.x=(f.x||0)*this.scale,h.y=(f.y||0)*this.scale,h.rotation=f.rotation||0,h.scaleX=f.scaleX||1,h.scaleY=f.scaleY||1,h.inheritScale=f.inheritScale||!0,h.inheritRotation=f.inheritRotation||!0,b.bones.push(h)}for(var i=a.slots,d=0,e=i.length;e>d;d++){var j=i[d],h=b.findBone(j.bone);if(!h)throw"Slot bone not found: "+j.bone;var k=new spine.SlotData(j.name,h),l=j.color;l&&(k.r=spine.SkeletonJson.toColor(l,0),k.g=spine.SkeletonJson.toColor(l,1),k.b=spine.SkeletonJson.toColor(l,2),k.a=spine.SkeletonJson.toColor(l,3)),k.attachmentName=j.attachment,k.additiveBlending=j.additive,b.slots.push(k)}var m=a.skins;for(var n in m)if(m.hasOwnProperty(n)){var o=m[n],p=new spine.Skin(n);for(var q in o)if(o.hasOwnProperty(q)){var r=b.findSlotIndex(q),s=o[q];for(var t in s)if(s.hasOwnProperty(t)){var u=this.readAttachment(p,t,s[t]);null!=u&&p.addAttachment(r,t,u)}}b.skins.push(p),"default"==p.name&&(b.defaultSkin=p)}var v=a.events;for(var w in v)if(v.hasOwnProperty(w)){var x=v[w],y=new spine.EventData(w);y.intValue=x["int"]||0,y.floatValue=x["float"]||0,y.stringValue=x.string||null,b.events.push(y)}var z=a.animations;for(var A in z)z.hasOwnProperty(A)&&this.readAnimation(A,z[A],b);return b},readAttachment:function(a,b,c){b=c.name||b;var d=spine.AttachmentType[c.type||"region"],e=this.attachmentLoader.newAttachment(a,d,b);if(d==spine.AttachmentType.region)e.x=(c.x||0)*this.scale,e.y=(c.y||0)*this.scale,e.scaleX=c.scaleX||1,e.scaleY=c.scaleY||1,e.rotation=c.rotation||0,e.width=(c.width||32)*this.scale,e.height=(c.height||32)*this.scale,e.updateOffset();else if(d==spine.AttachmentType.boundingBox)for(var f=c.vertices,g=0,h=f.length;h>g;g++)e.vertices.push(f[g]*scale);return e},readAnimation:function(a,b,c){var d=[],e=0,f=b.bones;for(var g in f)if(f.hasOwnProperty(g)){var h=c.findBoneIndex(g);if(-1==h)throw"Bone not found: "+g;var i=f[g];for(var j in i)if(i.hasOwnProperty(j)){var k=i[j];if("rotate"==j){var l=new spine.RotateTimeline(k.length);l.boneIndex=h;for(var m=0,n=0,o=k.length;o>n;n++){var p=k[n];l.setFrame(m,p.time,p.angle),spine.SkeletonJson.readCurve(l,m,p),m++}d.push(l),e=Math.max(e,l.frames[2*l.getFrameCount()-2])}else{if("translate"!=j&&"scale"!=j)throw"Invalid timeline type for a bone: "+j+" ("+g+")";var l,q=1;"scale"==j?l=new spine.ScaleTimeline(k.length):(l=new spine.TranslateTimeline(k.length),q=this.scale),l.boneIndex=h;for(var m=0,n=0,o=k.length;o>n;n++){var p=k[n],r=(p.x||0)*q,s=(p.y||0)*q;l.setFrame(m,p.time,r,s),spine.SkeletonJson.readCurve(l,m,p),m++}d.push(l),e=Math.max(e,l.frames[3*l.getFrameCount()-3])}}}var t=b.slots;for(var u in t)if(t.hasOwnProperty(u)){var v=t[u],w=c.findSlotIndex(u);for(var j in v)if(v.hasOwnProperty(j)){var k=v[j];if("color"==j){var l=new spine.ColorTimeline(k.length);l.slotIndex=w;for(var m=0,n=0,o=k.length;o>n;n++){var p=k[n],x=p.color,y=spine.SkeletonJson.toColor(x,0),z=spine.SkeletonJson.toColor(x,1),A=spine.SkeletonJson.toColor(x,2),B=spine.SkeletonJson.toColor(x,3);l.setFrame(m,p.time,y,z,A,B),spine.SkeletonJson.readCurve(l,m,p),m++}d.push(l),e=Math.max(e,l.frames[5*l.getFrameCount()-5])}else{if("attachment"!=j)throw"Invalid timeline type for a slot: "+j+" ("+u+")";var l=new spine.AttachmentTimeline(k.length);l.slotIndex=w;for(var m=0,n=0,o=k.length;o>n;n++){var p=k[n];l.setFrame(m++,p.time,p.name)}d.push(l),e=Math.max(e,l.frames[l.getFrameCount()-1])}}}var C=b.events;if(C){for(var l=new spine.EventTimeline(C.length),m=0,n=0,o=C.length;o>n;n++){var D=C[n],E=c.findEvent(D.name);if(!E)throw"Event not found: "+D.name;var F=new spine.Event(E);F.intValue=D.hasOwnProperty("int")?D["int"]:E.intValue,F.floatValue=D.hasOwnProperty("float")?D["float"]:E.floatValue,F.stringValue=D.hasOwnProperty("string")?D.string:E.stringValue,l.setFrame(m++,D.time,F)}d.push(l),e=Math.max(e,l.frames[l.getFrameCount()-1])}var G=b.draworder;if(G){for(var l=new spine.DrawOrderTimeline(G.length),H=c.slots.length,m=0,n=0,o=G.length;o>n;n++){var I=G[n],J=null;if(I.offsets){J=[],J.length=H;for(var K=H-1;K>=0;K--)J[K]=-1;var L=I.offsets,M=[];M.length=H-L.length;for(var N=0,O=0,K=0,P=L.length;P>K;K++){var Q=L[K],w=c.findSlotIndex(Q.slot);if(-1==w)throw"Slot not found: "+Q.slot;for(;N!=w;)M[O++]=N++;J[N+Q.offset]=N++}for(;H>N;)M[O++]=N++;for(var K=H-1;K>=0;K--)-1==J[K]&&(J[K]=M[--O])}l.setFrame(m++,I.time,J)}d.push(l),e=Math.max(e,l.frames[l.getFrameCount()-1])}c.animations.push(new spine.Animation(a,d,e))}},spine.SkeletonJson.readCurve=function(a,b,c){var d=c.curve;d&&("stepped"==d?a.curves.setStepped(b):d instanceof Array&&a.curves.setCurve(b,d[0],d[1],d[2],d[3]))},spine.SkeletonJson.toColor=function(a,b){if(8!=a.length)throw"Color hexidecimal length must be 8, recieved: "+a;return parseInt(a.substring(2*b,2*b+2),16)/255},spine.Atlas=function(a,b){this.textureLoader=b,this.pages=[],this.regions=[];var c=new spine.AtlasReader(a),d=[];d.length=4;for(var e=null;;){var f=c.readLine();if(null==f)break;if(f=c.trim(f),0==f.length)e=null;else if(e){var g=new spine.AtlasRegion;g.name=f,g.page=e,g.rotate="true"==c.readValue(),c.readTuple(d);var h=parseInt(d[0]),i=parseInt(d[1]);c.readTuple(d);var j=parseInt(d[0]),k=parseInt(d[1]);g.u=h/e.width,g.v=i/e.height,g.rotate?(g.u2=(h+k)/e.width,g.v2=(i+j)/e.height):(g.u2=(h+j)/e.width,g.v2=(i+k)/e.height),g.x=h,g.y=i,g.width=Math.abs(j),g.height=Math.abs(k),4==c.readTuple(d)&&(g.splits=[parseInt(d[0]),parseInt(d[1]),parseInt(d[2]),parseInt(d[3])],4==c.readTuple(d)&&(g.pads=[parseInt(d[0]),parseInt(d[1]),parseInt(d[2]),parseInt(d[3])],c.readTuple(d))),g.originalWidth=parseInt(d[0]),g.originalHeight=parseInt(d[1]),c.readTuple(d),g.offsetX=parseInt(d[0]),g.offsetY=parseInt(d[1]),g.index=parseInt(c.readValue()),this.regions.push(g)}else{e=new spine.AtlasPage,e.name=f,e.format=spine.Atlas.Format[c.readValue()],c.readTuple(d),e.minFilter=spine.Atlas.TextureFilter[d[0]],e.magFilter=spine.Atlas.TextureFilter[d[1]];var l=c.readValue();e.uWrap=spine.Atlas.TextureWrap.clampToEdge,e.vWrap=spine.Atlas.TextureWrap.clampToEdge,"x"==l?e.uWrap=spine.Atlas.TextureWrap.repeat:"y"==l?e.vWrap=spine.Atlas.TextureWrap.repeat:"xy"==l&&(e.uWrap=e.vWrap=spine.Atlas.TextureWrap.repeat),b.load(e,f),this.pages.push(e)}}},spine.Atlas.prototype={findRegion:function(a){for(var b=this.regions,c=0,d=b.length;d>c;c++)if(b[c].name==a)return b[c];return null},dispose:function(){for(var a=this.pages,b=0,c=a.length;c>b;b++)this.textureLoader.unload(a[b].rendererObject)},updateUVs:function(a){for(var b=this.regions,c=0,d=b.length;d>c;c++){var e=b[c];e.page==a&&(e.u=e.x/a.width,e.v=e.y/a.height,e.rotate?(e.u2=(e.x+e.height)/a.width,e.v2=(e.y+e.width)/a.height):(e.u2=(e.x+e.width)/a.width,e.v2=(e.y+e.height)/a.height))}}},spine.Atlas.Format={alpha:0,intensity:1,luminanceAlpha:2,rgb565:3,rgba4444:4,rgb888:5,rgba8888:6},spine.Atlas.TextureFilter={nearest:0,linear:1,mipMap:2,mipMapNearestNearest:3,mipMapLinearNearest:4,mipMapNearestLinear:5,mipMapLinearLinear:6},spine.Atlas.TextureWrap={mirroredRepeat:0,clampToEdge:1,repeat:2},spine.AtlasPage=function(){},spine.AtlasPage.prototype={name:null,format:null,minFilter:null,magFilter:null,uWrap:null,vWrap:null,rendererObject:null,width:0,height:0},spine.AtlasRegion=function(){},spine.AtlasRegion.prototype={page:null,name:null,x:0,y:0,width:0,height:0,u:0,v:0,u2:0,v2:0,offsetX:0,offsetY:0,originalWidth:0,originalHeight:0,index:0,rotate:!1,splits:null,pads:null},spine.AtlasReader=function(a){this.lines=a.split(/\r\n|\r|\n/)},spine.AtlasReader.prototype={index:0,trim:function(a){return a.replace(/^\s+|\s+$/g,"")},readLine:function(){return this.index>=this.lines.length?null:this.lines[this.index++]},readValue:function(){var a=this.readLine(),b=a.indexOf(":");if(-1==b)throw"Invalid line: "+a;return this.trim(a.substring(b+1))},readTuple:function(a){var b=this.readLine(),c=b.indexOf(":");if(-1==c)throw"Invalid line: "+b;for(var d=0,e=c+1;3>d;d++){var f=b.indexOf(",",e);if(-1==f){if(0==d)throw"Invalid line: "+b;break}a[d]=this.trim(b.substr(e,f-e)),e=f+1}return a[d]=this.trim(b.substring(e)),d+1}},spine.AtlasAttachmentLoader=function(a){this.atlas=a},spine.AtlasAttachmentLoader.prototype={newAttachment:function(a,b,c){switch(b){case spine.AttachmentType.boundingbox:return new spine.BoundingBoxAttachment(c);case spine.AttachmentType.region:var d=this.atlas.findRegion(c);if(!d)throw"Region not found in atlas: "+c+" ("+b+")";var e=new spine.RegionAttachment(c);return e.rendererObject=d,e.setUVs(d.u,d.v,d.u2,d.v2,d.rotate),e.regionOffsetX=d.offsetX,e.regionOffsetY=d.offsetY,e.regionWidth=d.width,e.regionHeight=d.height,e.regionOriginalWidth=d.originalWidth,e.regionOriginalHeight=d.originalHeight,e}throw"Unknown attachment type: "+b}},spine.SkeletonBounds=function(){this.polygonPool=[],this.polygons=[],this.boundingBoxes=[]},spine.SkeletonBounds.prototype={minX:0,minY:0,maxX:0,maxY:0,update:function(a,b){var c=a.slots,d=c.length,e=a.x,f=a.y,g=this.boundingBoxes,h=this.polygonPool,i=this.polygons;g.length=0;for(var j=0,k=i.length;k>j;j++)h.push(i[j]);i.length=0;for(var j=0;d>j;j++){var l=c[j],m=l.attachment;if(m.type==spine.AttachmentType.boundingBox){g.push(m);var n=h.length;n>0?(polygon=h[n-1],h.splice(n-1,1)):polygon=[],i.push(polygon),polygon.length=m.vertices.length,m.computeWorldVertices(e,f,l.bone,polygon)}}b&&this.aabbCompute()},aabbCompute:function(){for(var a=this.polygons,b=Number.MAX_VALUE,c=Number.MAX_VALUE,d=Number.MIN_VALUE,e=Number.MIN_VALUE,f=0,g=a.length;g>f;f++)for(var h=a[f],i=0,j=h.length;j>i;i+=2){var k=h[i],l=h[i+1];b=Math.min(b,k),c=Math.min(c,l),d=Math.max(d,k),e=Math.max(e,l)}this.minX=b,this.minY=c,this.maxX=d,this.maxY=e},aabbContainsPoint:function(a,b){return a>=this.minX&&a<=this.maxX&&b>=this.minY&&b<=this.maxY},aabbIntersectsSegment:function(a,b,c,d){var e=this.minX,f=this.minY,g=this.maxX,h=this.maxY;if(e>=a&&e>=c||f>=b&&f>=d||a>=g&&c>=g||b>=h&&d>=h)return!1;var i=(d-b)/(c-a),j=i*(e-a)+b;if(j>f&&h>j)return!0;if(j=i*(g-a)+b,j>f&&h>j)return!0;var k=(f-b)/i+a;return k>e&&g>k?!0:(k=(h-b)/i+a,k>e&&g>k?!0:!1)},aabbIntersectsSkeleton:function(a){return this.minX<a.maxX&&this.maxX>a.minX&&this.minY<a.maxY&&this.maxY>a.minY},containsPoint:function(a,b){for(var c=this.polygons,d=0,e=c.length;e>d;d++)if(this.polygonContainsPoint(c[d],a,b))return this.boundingBoxes[d];return null},intersectsSegment:function(a,b,c,d){for(var e=this.polygons,f=0,g=e.length;g>f;f++)if(e[f].intersectsSegment(a,b,c,d))return boundingBoxes[f];return null},polygonContainsPoint:function(a,b,c){for(var d=a.length,e=d-2,f=!1,g=0;d>g;g+=2){var h=a[g+1],i=a[e+1];if(c>h&&i>=c||c>i&&h>=c){var j=a[g];j+(c-h)/(i-h)*(a[e]-j)<b&&(f=!f)}e=g}return f},intersectsSegment:function(a,b,c,d,e){for(var f=a.length,g=b-d,h=c-e,i=b*e-c*d,j=a[f-2],k=a[f-1],l=0;f>l;l+=2){var m=a[l],n=a[l+1],o=j*n-k*m,p=j-m,q=k-n,r=g*q-h*p,s=(i*p-g*o)/r;if((s>=j&&m>=s||s>=m&&j>=s)&&(s>=b&&d>=s||s>=d&&b>=s)){var t=(i*q-h*o)/r;if((t>=k&&n>=t||t>=n&&k>=t)&&(t>=c&&e>=t||t>=e&&c>=t))return!0}j=m,k=n}return!1},getPolygon:function(a){var b=this.boundingBoxes.indexOf(a);return-1==b?null:this.polygons[b]},getWidth:function(){return this.maxX-this.minX},getHeight:function(){return this.maxY-this.minY}},function(){var a={},b=null,c=!0,d=!1;if("undefined"!=typeof AudioContext)b=new AudioContext;else if("undefined"!=typeof webkitAudioContext)b=new webkitAudioContext;else if("undefined"!=typeof Audio){c=!1;try{new Audio}catch(e){d=!0}}else c=!1,d=!0;if(c){var f="undefined"==typeof b.createGain?b.createGainNode():b.createGain();f.gain.value=1,f.connect(b.destination)}var g=function(){this._volume=1,this._muted=!1,this.usingWebAudio=c,this._howls=[]};g.prototype={volume:function(a){var b=this;if(a=parseFloat(a),a>=0&&1>=a){b._volume=a,c&&(f.gain.value=a);for(var d in b._howls)if(b._howls.hasOwnProperty(d)&&b._howls[d]._webAudio===!1)for(var e=0;e<b._howls[d]._audioNode.length;e++)b._howls[d]._audioNode[e].volume=b._howls[d]._volume*b._volume;return b}return c?f.gain.value:b._volume},mute:function(){return this._setMuted(!0),this},unmute:function(){return this._setMuted(!1),this},_setMuted:function(a){var b=this;b._muted=a,c&&(f.gain.value=a?0:b._volume);for(var d in b._howls)if(b._howls.hasOwnProperty(d)&&b._howls[d]._webAudio===!1)for(var e=0;e<b._howls[d]._audioNode.length;e++)b._howls[d]._audioNode[e].muted=a}};var h=new g,i=null;if(!d){i=new Audio;var j={mp3:!!i.canPlayType("audio/mpeg;").replace(/^no$/,""),opus:!!i.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!i.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!i.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),m4a:!!(i.canPlayType("audio/x-m4a;")||i.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!i.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")}}var k=function(a){var b=this;b._autoplay=a.autoplay||!1,b._buffer=a.buffer||!1,b._duration=a.duration||0,b._format=a.format||null,b._loop=a.loop||!1,b._loaded=!1,b._sprite=a.sprite||{},b._src=a.src||"",b._pos3d=a.pos3d||[0,0,-.5],b._volume=void 0!==a.volume?a.volume:1,b._urls=a.urls||[],b._rate=a.rate||1,b._onload=[a.onload||function(){}],b._onloaderror=[a.onloaderror||function(){}],b._onend=[a.onend||function(){}],b._onpause=[a.onpause||function(){}],b._onplay=[a.onplay||function(){}],b._onendTimer=[],b._webAudio=c&&!b._buffer,b._audioNode=[],b._webAudio&&b._setupAudioNode(),h._howls.push(b),b.load()};if(k.prototype={load:function(){var b=this,c=null;if(d)return b.on("loaderror"),void 0;for(var e=0;e<b._urls.length;e++){var f,g;if(b._format)f=b._format;else{if(g=b._urls[e].toLowerCase().split("?")[0],f=g.match(/.+\.([^?]+)(\?|$)/),f=f&&f.length>=2?f:g.match(/data\:audio\/([^?]+);/),!f)return b.on("loaderror"),void 0;f=f[1]}if(j[f]){c=b._urls[e];break}}if(!c)return b.on("loaderror"),void 0;if(b._src=c,b._webAudio)l(b,c);else{var i=new Audio;b._audioNode.push(i),i.src=c,i._pos=0,i.preload="auto",i.volume=h._muted?0:b._volume*h.volume(),a[c]=b;var k=function(){b._duration=i.duration,0===Object.getOwnPropertyNames(b._sprite).length&&(b._sprite={_default:[0,1e3*b._duration]}),b._loaded||(b._loaded=!0,b.on("load")),b._autoplay&&b.play(),i.removeEventListener("canplaythrough",k,!1)};i.addEventListener("canplaythrough",k,!1),i.load()}return b},urls:function(a){var b=this;return a?(b.stop(),b._urls="string"==typeof a?[a]:a,b._loaded=!1,b.load(),b):b._urls},play:function(a,c){var d=this;return"function"==typeof a&&(c=a),a&&"function"!=typeof a||(a="_default"),d._loaded?d._sprite[a]?(d._inactiveNode(function(e){e._sprite=a;var f,g=e._pos>0?e._pos:d._sprite[a][0]/1e3,i=d._sprite[a][1]/1e3-e._pos,j=!(!d._loop&&!d._sprite[a][2]),k="string"==typeof c?c:Math.round(Date.now()*Math.random())+"";if(function(){var b={id:k,sprite:a,loop:j};f=setTimeout(function(){!d._webAudio&&j&&d.stop(b.id,b.timer).play(a,b.id),d._webAudio&&!j&&(d._nodeById(b.id).paused=!0,d._nodeById(b.id)._pos=0),d._webAudio||j||d.stop(b.id,b.timer),d.on("end",k)},1e3*i),d._onendTimer.push(f),b.timer=d._onendTimer[d._onendTimer.length-1]}(),d._webAudio){var l=d._sprite[a][0]/1e3,m=d._sprite[a][1]/1e3;e.id=k,e.paused=!1,n(d,[j,l,m],k),d._playStart=b.currentTime,e.gain.value=d._volume,"undefined"==typeof e.bufferSource.start?e.bufferSource.noteGrainOn(0,g,i):e.bufferSource.start(0,g,i)}else{if(4!==e.readyState)return d._clearEndTimer(f),function(){var b=d,f=a,g=c,h=e,i=function(){b.play(f,g),h.removeEventListener("canplaythrough",i,!1)};h.addEventListener("canplaythrough",i,!1)}(),d;e.id=k,e.currentTime=g,e.muted=h._muted,e.volume=d._volume*h.volume(),setTimeout(function(){e.play()},0)}return d.on("play"),"function"==typeof c&&c(k),d}),d):("function"==typeof c&&c(),d):(d.on("load",function(){d.play(a,c)}),d)},pause:function(a,b){var c=this;if(!c._loaded)return c.on("play",function(){c.pause(a)}),c;c._clearEndTimer(b||0);var d=a?c._nodeById(a):c._activeNode();if(d)if(d._pos=c.pos(null,a),c._webAudio){if(!d.bufferSource)return c;d.paused=!0,"undefined"==typeof d.bufferSource.stop?d.bufferSource.noteOff(0):d.bufferSource.stop(0)}else d.pause();return c.on("pause"),c},stop:function(a,b){var c=this;if(!c._loaded)return c.on("play",function(){c.stop(a)}),c;c._clearEndTimer(b||0);var d=a?c._nodeById(a):c._activeNode();if(d)if(d._pos=0,c._webAudio){if(!d.bufferSource)return c;d.paused=!0,"undefined"==typeof d.bufferSource.stop?d.bufferSource.noteOff(0):d.bufferSource.stop(0)}else d.pause(),d.currentTime=0;return c},mute:function(a){var b=this;if(!b._loaded)return b.on("play",function(){b.mute(a)}),b;var c=a?b._nodeById(a):b._activeNode();return c&&(b._webAudio?c.gain.value=0:c.volume=0),b},unmute:function(a){var b=this;if(!b._loaded)return b.on("play",function(){b.unmute(a)}),b;var c=a?b._nodeById(a):b._activeNode();return c&&(b._webAudio?c.gain.value=b._volume:c.volume=b._volume),b},volume:function(a,b){var c=this;if(a=parseFloat(a),a>=0&&1>=a){if(c._volume=a,!c._loaded)return c.on("play",function(){c.volume(a,b)}),c;var d=b?c._nodeById(b):c._activeNode();return d&&(c._webAudio?d.gain.value=a:d.volume=a*h.volume()),c}return c._volume},loop:function(a){var b=this;return"boolean"==typeof a?(b._loop=a,b):b._loop},sprite:function(a){var b=this;return"object"==typeof a?(b._sprite=a,b):b._sprite},pos:function(a,c){var d=this;if(!d._loaded)return d.on("load",function(){d.pos(a)}),"number"==typeof a?d:d._pos||0;a=parseFloat(a);var e=c?d._nodeById(c):d._activeNode();if(e)return d._webAudio?a>=0?(d.pause(c),e._pos=a,d.play(e._sprite,c),d):e._pos+(b.currentTime-d._playStart):a>=0?(e.currentTime=a,d):e.currentTime;if(a>=0)return d;for(var f=0;f<d._audioNode.length;f++)if(d._audioNode[f].paused&&4===d._audioNode[f].readyState)return d._webAudio?d._audioNode[f]._pos:d._audioNode[f].currentTime},pos3d:function(a,b,c,d){var e=this;if(b="undefined"!=typeof b&&b?b:0,c="undefined"!=typeof c&&c?c:-.5,!e._loaded)return e.on("play",function(){e.pos3d(a,b,c,d)}),e;if(!(a>=0||0>a))return e._pos3d;if(e._webAudio){var f=d?e._nodeById(d):e._activeNode();f&&(e._pos3d=[a,b,c],f.panner.setPosition(a,b,c))}return e},fade:function(a,b,c,d,e){var f=this,g=Math.abs(a-b),h=a>b?"down":"up",i=g/.01,j=c/i;if(!f._loaded)return f.on("load",function(){f.fade(a,b,c,d,e)}),f;f.volume(a,e);for(var k=1;i>=k;k++)!function(){var a=f._volume+("up"===h?.01:-.01)*k,c=Math.round(1e3*a)/1e3,g=b;setTimeout(function(){f.volume(c,e),c===g&&d&&d()},j*k)}()},fadeIn:function(a,b,c){return this.volume(0).play().fade(0,a,b,c)},fadeOut:function(a,b,c,d){var e=this;return e.fade(e._volume,a,b,function(){c&&c(),e.pause(d),e.on("end")},d)},_nodeById:function(a){for(var b=this,c=b._audioNode[0],d=0;d<b._audioNode.length;d++)if(b._audioNode[d].id===a){c=b._audioNode[d];break}return c},_activeNode:function(){for(var a=this,b=null,c=0;c<a._audioNode.length;c++)if(!a._audioNode[c].paused){b=a._audioNode[c];break}return a._drainPool(),b},_inactiveNode:function(a){for(var b=this,c=null,d=0;d<b._audioNode.length;d++)if(b._audioNode[d].paused&&4===b._audioNode[d].readyState){a(b._audioNode[d]),c=!0;break}if(b._drainPool(),!c){var e;b._webAudio?(e=b._setupAudioNode(),a(e)):(b.load(),e=b._audioNode[b._audioNode.length-1],e.addEventListener("loadedmetadata",function(){a(e)}))}},_drainPool:function(){var a,b=this,c=0;for(a=0;a<b._audioNode.length;a++)b._audioNode[a].paused&&c++;for(a=b._audioNode.length-1;a>=0&&!(5>=c);a--)b._audioNode[a].paused&&(b._webAudio&&b._audioNode[a].disconnect(0),c--,b._audioNode.splice(a,1))},_clearEndTimer:function(a){var b=this,c=b._onendTimer.indexOf(a);c=c>=0?c:0,b._onendTimer[c]&&(clearTimeout(b._onendTimer[c]),b._onendTimer.splice(c,1))},_setupAudioNode:function(){var a=this,c=a._audioNode,d=a._audioNode.length;return c[d]="undefined"==typeof b.createGain?b.createGainNode():b.createGain(),c[d].gain.value=a._volume,c[d].paused=!0,c[d]._pos=0,c[d].readyState=4,c[d].connect(f),c[d].panner=b.createPanner(),c[d].panner.setPosition(a._pos3d[0],a._pos3d[1],a._pos3d[2]),c[d].panner.connect(c[d]),c[d]},on:function(a,b){var c=this,d=c["_on"+a];if("function"==typeof b)d.push(b);else for(var e=0;e<d.length;e++)b?d[e].call(c,b):d[e].call(c);return c},off:function(a,b){for(var c=this,d=c["_on"+a],e=b.toString(),f=0;f<d.length;f++)if(e===d[f].toString()){d.splice(f,1);break}return c},unload:function(){for(var b=this,c=b._audioNode,d=0;d<b._audioNode.length;d++)c[d].paused||b.stop(c[d].id),b._webAudio?c[d].disconnect(0):c[d].src="";var e=h._howls.indexOf(b);null!==e&&e>=0&&h._howls.splice(e,1),delete a[b._src],b=null}},c)var l=function(c,d){if(d in a)c._duration=a[d].duration,m(c);else{var e=new XMLHttpRequest;e.open("GET",d,!0),e.responseType="arraybuffer",e.onload=function(){b.decodeAudioData(e.response,function(b){b&&(a[d]=b,m(c,b))},function(){c.on("loaderror")})},e.onerror=function(){c._webAudio&&(c._buffer=!0,c._webAudio=!1,c._audioNode=[],delete c._gainNode,c.load())};try{e.send()}catch(f){e.onerror()}}},m=function(a,b){a._duration=b?b.duration:a._duration,0===Object.getOwnPropertyNames(a._sprite).length&&(a._sprite={_default:[0,1e3*a._duration]}),a._loaded||(a._loaded=!0,a.on("load")),a._autoplay&&a.play()},n=function(c,d,e){var f=c._nodeById(e);f.bufferSource=b.createBufferSource(),f.bufferSource.buffer=a[c._src],f.bufferSource.connect(f.panner),f.bufferSource.loop=d[0],d[0]&&(f.bufferSource.loopStart=d[1],f.bufferSource.loopEnd=d[1]+d[2]),f.bufferSource.playbackRate.value=c._rate};"function"==typeof define&&define.amd&&define("howler",function(){return{Howler:h,Howl:k}}),window.Howler=h,window.Howl=k}();var modules=modules||{};modules.glue=modules.glue||{},modules.glue.sugar=function(a,b){"use strict";var c=function(a){return m(a.width)&&m(a.height)},d=function(a){return m(a.x)&&m(a.y)},e=function(a){return q(a,"get")&&i(a.get)&&q(a,"set")&&i(a.set)&&q(a,"transpose")&&i(a.transpose)&&q(a,"add")&&i(a.add)&&q(a,"multiply")&&i(a.multiply)?!0:void 0},f=function(a){return"string"==typeof a||a instanceof String},g=Array.prototype.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)},h=function(a){return"[object Object]"===Object.prototype.toString.call(a)},i=function(a){return"[object Function]"===Object.prototype.toString.call(a)},j=function(a,b){var c=a.length;if(c!=b.length)return!1;for(;c--;)if(a[c]!==b[c])return!1;return!0},k=function(b,c){var d,e,f,g,h,i,j,k=[],l=a;for(e=0,g=b.length;g>e;++e){if(l=a,i=b[e].split("."),1===i.length)j=a[i];else for(d=0,f=i.length;f>d;++d)h=i[d],d===f-1?j=l[h]:l[h]&&(l=l[h]);if(!j||!this.isFunction(j))throw"glue.sugar.imports: Module "+b[e]+" not found or not a function";k.push(j)}return c.apply(glue,k)},l=function(){},m=function(a){return"[object Number]"===Object.prototype.toString.call(a)},n=function(a){return a===!0||a===!1||"[object Boolean]"===Object.prototype.toString.call(a)},o=function(a){return"[object Date]"===Object.prototype.toString.call(a)},p=function(a){return parseFloat(a)===parseInt(a,10)&&!isNaN(a)},q=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)},r=function(a){return void 0===a},s=function(a){return void 0!==a},t=function(a){var b;if(""===a||0===a||"0"===a||null===a||a===!1||this.isUndefined(a))return!0;if(this.isArray(a)&&0===a.length)return!0;if(this.isObject(a)){for(b in a)if(this.has(a,b))return!1;return!0}return!1},u=function(a){return"[object Arguments]"===Object.prototype.toString.call(a)},v=function(a,b){return a+Math.floor(Math.random()*(b-a+1))},w=function(a){return a.charAt(0).toUpperCase()+a.slice(1)},x=function(){for(var a=this.toArray(arguments),b=this["is"+this.upperFirst(a.shift())],c=a.length;c--;)if(!b.call(null,a[c]))return!1;return!0},y=function(a,b){var c;if(this.multiIs("array",a,b))return a.concat(b);for(c in b)this.has(b,c)&&(this.has(a,c)&&(a.base=a.base||{},a.base[c]=a[c]),a[c]=this.isObject(b[c])?this.combine({},b[c]):b[c]);return a},z=function(a){return/^\[object (HTMLCollection|NodeList|Object)\]$/.test(toString.call(a))&&this.isNumber(a.length)&&(0===a.length||"object"==typeof a[0]&&a[0].nodeType>0)},A=function(a){var b,c=[];if(!a)return[a];if(this.isArgument(a))return Array.prototype.slice.call(a);if(this.isString(a)&&a.split(""),this.isArray(a))return Array.prototype.slice.call(a);if(this.isDomList(a))return Array.prototype.slice.call(a);for(b in a)this.has(a,b)&&c.push(a[b]);return c},B=function(a,b){return this.isString(a)?-1!==a.indexOf(b)?!0:!1:this.isArray(a)?-1!==this.indexOf(a,b)?!0:!1:this.has(a,b)},C=function(a,b){var c=0;if(null===a)return-1;if(a.indexOf)return a.indexOf(b);for(c=a.length;c--;)if(a[c]===b)return c;return-1},D=function(a){return!(!a||1!==a.nodeType)},E=function(a){var b,c=0;if(!a)return 0;if(this.isObject(a))for(b in a)this.has(a,b)&&++c;return(this.isString(a)||this.isArray(a)||this.isArguments(a))&&(c=a.length),this.isNumber(a)&&(c=a.toString().length),c},F=function(a){return this.combine({},a,!0)},G=function(a){return!(!(a&&a.test&&a.exec)||!a.ignoreCase&&a.ignoreCase!==!1)},H=Object.prototype.keys||function(a){var b,c=[];if(a==Object(a))for(b in a)this.has(a,b)&&(c[c.length]=b);return c},I=function(a){var b=!1;return function(){return b?void 0:(b=!0,a.apply(a,arguments))}},J=function(a,b){var c={};return b=b||function(a){return a},function(){var d=b.apply(null,arguments);return this.has(c,d)?c[d]:c[d]=a.apply(a,arguments)}},K=function(a,b){var c,d;for(c=0,d=a.length;d>c;++c)if(a[c]===b){a.splice(c,1);break}},L=function(c,d,e){var f;return c.style&&this.isEmpty(c.style[d])?c.currentStyle?f=c.currentStyle[d]:a.getComputedStyle&&(f=b.defaultView.getComputedStyle(c,null).getPropertyValue(d)):c.style&&(f=c.style[d]),e?parseFloat(f):f},M=function(a){return typeof a==typeof Function},N=function(a,c,d){var e;return d&&(d.style.display="none"),e=b.elementFromPoint(a,c),e&&this&&this.containsClass(e,"omit")&&(e=N(a,c,e)),d&&(d.style.display=""),e},O=function(a,c,d){var e,f=!1,g=[];for(d&&(d.style.display="none"),f=b.elementFromPoint(a,c);f&&"BODY"!==f.tagName&&"HTML"!==f.tagName;)g.push(f),T(f,"animated"),f.style.display="none",f=b.elementFromPoint(a,c);for(e=0;e<g.length;++e)g[e].style.display="block";return d&&(d.style.display="block"),g},P=function(a,b){return a.getAttribute("data-"+b)},Q=function(a,b,c){return a.setAttribute("data-"+b,c)},R=function(a,c){return(R=b.documentElement.classList?function(a,b){return a.classList.contains(b)}:function(a,b){if(!a||!a.className)return!1;var c=new RegExp("(^|\\s)"+b+"(\\s|$)");return a.className.match(c)})(a,c)},S=function(a,c){var d,e,f=this;return(S=b.documentElement.classList?function(a,b){if(f.isArray(b))for(d=0,e=b.length;e>d;++d)a.classList.add(b[d]);else a.classList.add(b)}:function(a,b){if(!a)return!1;if(!R(a,b))if(f.isArray(b))for(d=0,e=b.length;e>d;++d)a.className+=(a.className?" ":"")+b[d];else a.className+=(a.className?" ":"")+b})(a,c)},T=function(a,c){return(T=b.documentElement.classList?function(a,b){a.classList.remove(b)}:function(a,b){if(!a||!a.className)return!1;var c=new RegExp("(^|\\s)"+b+"(\\s|$)","g");a.className=a.className.replace(c,"$2")})(a,c)},U=function(a){a.className="",a.setAttribute("class","")},V=function(a,c){return(V=b.documentElement.classList&&b.documentElement.classList.toggle?function(a,b){return a.classList.toggle(b)}:function(a,b){return R(a,b)?(T(a,b),!1):(S(a,b),!0)})(a,c)},W=function(a,b){if(document.createEvent){var c=document.createEvent("MouseEvents");return c.initEvent(b,!0,!1),a.dispatchEvent(c),!0}return document.createEventObject?(a.fireEvent("on"+b),!0):"function"==typeof a["on"+b]?(a["on"+b](),!0):!1},X=function(a){return b.querySelector(a)},Y=function(a,b){function c(){var f=(new Date).getTime();f-d>=b?a():e=requestAnimationFrame(c)}var d=(new Date).getTime(),e=null;return void 0===b&&(b=1),c(),{cancel:function(){"undefined"!=typeof cancelAnimationFrame&&cancelAnimationFrame(e)}}},Z=function(a,b,c,d){var e,f,g={start:["animationstart","animationstart","webkitAnimationStart","oanimationstart","MSAnimationStart"],iteration:["animationiteration","animationiteration","webkitAnimationIteration","oanimationiteration","MSAnimationIteration"],end:["animationend","animationend","webkitAnimationEnd","oanimationend","MSAnimationEnd"],tend:["transitionend","transitionend","webkitTransitionEnd","otransitionend","MSTransitionEnd"]},h=g[b]||[],d=d||"add";for(f=0,e=h.length;e>f;++f)"add"===d?a.addEventListener(h[f],c,!1):"remove"===d&&a.removeEventListener(h[f],c,!1)},$=function(c){var d=b.readyState;"complete"===d||"interactive"===d?c():a.addEventListener?a.addEventListener("DOMContentLoaded",c):a.attachEvent("onload",c)},_=function(){var a=function(a,c){return b(a.slice(),c)},b=function(a,b){"function"!=typeof b&&(b=function(a,b){return String(a).localeCompare(b)});var d=a.length;if(1>=d)return a;for(var e=new Array(d),f=1;d>f;f*=2){c(a,b,f,e);var g=a;a=e,e=g}return a},c=function(a,b,c,d){var e,f,g,h,i,j=a.length,k=0,l=2*c;for(e=0;j>e;e+=l)for(f=e+c,g=f+c,f>j&&(f=j),g>j&&(g=j),h=e,i=f;;)if(f>h&&g>i)d[k++]=b(a[h],a[i])<=0?a[h++]:a[i++];else if(f>h)d[k++]=a[h++];else{if(!(g>i))break;d[k++]=a[i++]}};return a.inplace=function(a,d){var e=b(a,d);return e!==a&&c(e,null,a.length,a),a},a}();return Object.prototype.hasOwnProperty||(Object.prototype.hasOwnProperty=function(a){var b=obj.__proto__||obj.constructor.prototype;return a in this&&(!(a in b)||b[a]!==this[a])}),function(){for(var a=0,b=["ms","moz","webkit","o"],c=window,d=0;d<b.length&&!c.requestAnimationFrame;++d)c.requestAnimationFrame=c[b[d]+"RequestAnimationFrame"],c.cancelAnimationFrame=c[b[d]+"CancelAnimationFrame"]||c[b[d]+"CancelRequestAnimationFrame"];c.requestAnimationFrame||(c.requestAnimationFrame=function(b){var d=(new Date).getTime(),e=Math.max(0,16-(d-a)),f=c.setTimeout(function(){b(d+e)},e);return a=d+e,f}),c.cancelAnimationFrame||(c.cancelAnimationFrame=function(a){clearTimeout(a)})}(),CanvasRenderingContext2D.prototype.clear=CanvasRenderingContext2D.prototype.clear||function(a){a&&(this.save(),this.setTransform(1,0,0,1,0,0)),this.clearRect(0,0,this.canvas.width,this.canvas.height),a&&this.restore()},{isVector:d,isDimension:c,isMatrix:e,isString:f,isArray:g,isObject:h,isFunction:i,emptyFn:l,isNumber:m,isBoolean:n,isDate:o,isInt:p,has:q,isUndefined:r,isDefined:s,isEmpty:t,isArgument:u,getRandom:v,upperFirst:w,multiIs:x,combine:y,imports:k,isDomList:z,toArray:A,contains:B,indexOf:C,isElement:D,size:E,clone:F,isRegex:G,keys:H,once:I,memoize:J,removeObject:K,getStyle:L,isFunctionByType:M,getNodeOnPoint:N,getNodesOnPoint:O,getData:P,setData:Q,containsClass:R,addClass:S,removeClass:T,removeClasses:U,toggleClass:V,triggerEvent:W,$:X,setAnimationFrameTimeout:Y,animationEvent:Z,domReady:$,arrayMatch:j,sort:{stable:_}}
}(window,window.document);var adapters=adapters||{};adapters.glue=function(a,b){"use strict";return{module:{create:a.define,get:a.require,config:a.requirejs.config},sugar:b.sugar,audio:Howl}}(window,modules.glue),function(a){var b=function(a){"use strict";return{module:a.glue.module,sugar:a.glue.sugar,audio:a.glue.audio}}(adapters);a.glue={module:b.module},a.game={},b.module.create("glue",function(){return b})}(window),glue.module.create("glue/basecomponent",["glue"],function(a){"use strict";var b=a.sugar;return function(a,c){var d,e,f;return b.isString(a)&&(d=a,e=c||{}),{set:function(c){return b.isObject(c)?(f=c,e[a]=c,b.isFunction(c.register)&&c.register(),e):void 0},getName:function(){return d},getBaseObject:function(){return e},getComponent:function(){return f},register:function(a){e.register(a,f[a],d)},unregister:function(a){e.unregister(a,d)}}}}),glue.module.create("glue/baseobject",["glue","glue/math/vector","glue/math/rectangle","glue/math/dimension","glue/math/matrix"],function(a,b,c,d,e){var f=a.sugar,g=0;return function(){var a,h,i,j,k,l=Array.prototype.slice.call(arguments),m=null,n=b(0,0),o=b(0,0),p=d(0,0),q=l.length,r=0,s=["update","draw","pointerDown","pointerMove","pointerUp"],t=["animatable","spritable","spineable"],u=t.length,v={destroy:{},draw:{},update:{},pointerDown:{},pointerMove:{},pointerUp:{}},w=[],x=null,y=++g,z=function(a,b){i=v[a];for(registrant in i)"draw"===a&&f.contains(t,registrant)||i[registrant].call(B,b)},A=function(a){var b,c,d=f.clone(a),g=d.position.toMatrix(),h=e(3,3),i=e(3,3),j=e(3,3);return h.set(2,0,-n.x),h.set(2,1,-n.y),g.multiply(h),B.rotatable&&(b=Math.sin(-B.rotatable.getAngleRadian()),c=Math.cos(-B.rotatable.getAngleRadian()),j.set(0,0,c),j.set(1,0,-b),j.set(0,1,b),j.set(1,1,c),g.multiply(j)),B.scalable&&(i.set(0,0,1/B.scalable.getScale().x),i.set(1,1,1/B.scalable.getScale().y),g.multiply(i)),d.position.x=g.get(0,0),d.position.y=g.get(0,1),d},B={add:function(a){return f.combine(this,a)},setName:function(b){a=b},getName:function(){return a},update:function(a){var b,c;for(z("update",a),b=0,c=w.length;c>b;++b)w[b].update(a)},count:0,updateWhenPaused:!1,draw:function(a){var c,d,e=a.scroll||b(0,0),f=a.context;for(f.save(),f.translate(n.x-e.x,n.y-e.y),z("draw",a),f.translate(-o.x,-o.y),j=0;u>j;++j)k=v.draw[t[j]],k&&k(a);for(f.translate(o.x,o.y),c=0,d=w.length;d>c;++c)w[c].draw(a);f.restore()},pointerDown:function(a){var b,c,d=w.length;if(z("pointerDown",a),d)for(c=A(a),b=0;d>b;++b)w[b].pointerDown(c)},pointerMove:function(a){var b,c,d=w.length;if(z("pointerMove",a),d)for(c=A(a),b=0;d>b;++b)w[b].pointerMove(c)},pointerUp:function(a){var b,c,d=w.length;if(z("pointerUp",a),d)for(c=A(a),b=0;d>b;++b)w[b].pointerUp(c)},register:function(a,b,c){f.contains(s,a)&&f.isFunction(b)&&(v[a][c]=b)},unregister:function(a,b){f.contains(s,a)&&f.isFunction(v[a][b])&&delete v[a][b]},getPosition:function(){return n},setPosition:function(a){f.isVector(a)&&(n.x=a.x,n.y=a.y,this.updateBoundingBox())},setPositionObject:function(a){f.isVector(a)&&(n=a,this.updateBoundingBox())},getDimension:function(){return p},setDimension:function(a){f.isDimension(a)&&(p=a,this.updateBoundingBox())},getBoundingBox:function(){return h},setBoundingBox:function(a){h=a},updateBoundingBox:function(){var a=B.scalable?B.scalable.getScale():b(1,1),d=n.x-o.x*a.x,e=n.y-o.y*a.y,f=n.x+(p.width-o.x)*a.x,g=n.y+(p.height-o.y)*a.y;a.x<0&&(f=[d,d=f][0]),a.y<0&&(g=[e,e=g][0]),h=c(d,e,f,g)},setOrigin:function(a){f.isVector(a)&&(o.x=f.isNumber(a.x)?a.x:o.x,o.y=f.isNumber(a.y)?a.y:o.y,this.updateBoundingBox())},getOrigin:function(){return o},addChild:function(a){w.push(a),a.setParent(this),a.init&&a.init()},getChildren:function(){return w},setParent:function(a){x=a},getParent:function(){return x},getID:function(){return y}};for(r;q>r;++r)(m=l[r])(B);return B}}),glue.module.create("glue/component/animatable",["glue","glue/math/vector","glue/basecomponent","glue/component/spritable"],function(a,b,c,d){"use strict";var e=a.sugar;return function(a){var b,f,g,h,i,j,k,l,m,n,o,p,q=c("animatable",a),r=d(a).spritable,s={},t=0,u=1,v=60,w=1/v,x=w,y=function(){l||(r.setImage(f.image),l=f.image),u=f.endFrame-f.startFrame,w=f.fps?1/f.fps:1/b.fps,x=w,j=f.startFrame,k=f.endFrame,t=j,m=f.loopCount||void 0,p=f.onComplete||void 0,n=0,o=!0};return q.set({setup:function(a){if(a){if(!a.animation)throw"Specify settings.animation";if(b=a.animation,a.animation.animations&&(s=a.animation.animations),!(e.isDefined(a.animation.frameCount)||e.isDefined(a.animation.frameWidth)&&e.isDefined(a.animation.frameHeight)))throw"Specify settings.animation.frameCount"}r.setup(a),a.image&&(l=a.image,g=a.animation.frameWidth||a.image.width/a.animation.frameCount,h=a.animation.frameHeight||a.image.height,i=a.image.width/g)},update:function(a){o&&(x-=a.deltaT,0>=x&&(x=w,++t,t>k&&(e.isDefined(m)&&(++n,n===m&&(o=!1,e.isDefined(p)&&p.call(this.animatable))),t=j)))},draw:function(b){{var c=(a.getPosition(),Math.floor(t/i)*h),d=t%i*g;a.getOrigin()}b.context.drawImage(l,d,c,g,h,0,0,g,h)},setAnimation:function(a){s[a]&&(f=s[a],y())},getDimension:function(){var b=a.getDimension();return b.width=g,b},getBoundingBox:function(){var b=a.getBoundingBox();return b.x2=b.x1+g,b},getFrameWidth:function(){return g},register:function(){q.register("draw"),q.register("update")},unregister:function(){q.unregister("draw"),q.unregister("update")}}),a}}),glue.module.create("glue/component/clickable",["glue","glue/basecomponent"],function(a,b){"use strict";return function(a){var c=b("clickable",a),d=function(b){return a.getBoundingBox().hasPosition(b.position)},e=function(b){d(b)&&(a.onClickDown&&a.onClickDown(b),a.onClick&&a.onClick(b))},f=function(b){d(b)&&a.onClickUp&&a.onClickUp(b)};return c.set({pointerDown:function(a){e(a)},pointerUp:function(a){f(a)},register:function(){c.register("pointerDown"),c.register("pointerUp")},unregister:function(){c.unregister("pointerDown"),c.unregister("pointerUp")}}),a}}),glue.module.create("glue/component/draggable",["glue","glue/math/vector","glue/event/system","glue/basecomponent"],function(a,b,c,d){"use strict";var e=[],f=30;return function(a){var g,h=d("draggable",a),i=!1,j=b(0,0),k=function(a){var b,c=0,d=e.length,f=!0;for(c;d>c;++c)if(b=e[c],b!==a&&b.z>a.z){f=!1;break}return f},l=function(b){return a.getBoundingBox().hasPosition(b.position)},m=function(b){l(b)&&i===!1&&(e.push(a),setTimeout(function(){return k(a)?(i=!0,g=b.pointerId,j=b.position.substract(a.getPosition()),a.dragStart&&a.dragStart(b),!1):void 0},f))},n=function(b){i===!0&&g===b.pointerId&&(a.setPosition(b.position.substract(j)),a.dragMove&&a.dragMove(b))},o=function(b){return i===!0?(c.fire("draggable.drop",a,b),e=[],g=void 0,i=!1,a.dragEnd&&a.dragEnd(b,function(){}),!1):void 0};return h.set({pointerDown:function(a){m(a)},pointerMove:function(a){n(a)},pointerUp:function(a){o(a)},dragStartTimeout:function(a){f=a},register:function(){h.register("pointerDown"),h.register("pointerMove"),h.register("pointerUp")},unregister:function(){h.unregister("pointerDown"),h.unregister("pointerMove"),h.unregister("pointerUp")}}),a}}),glue.module.create("glue/component/droptarget",["glue","glue/event/system","glue/basecomponent"],function(a,b,c){"use strict";return function(a){var d=c("droptarget",a),e=function(b,c){return a.getBoundingBox().hasPosition(c.position)},f=function(b,c){e(a,c)&&a.onDrop&&a.onDrop(b,c)};return d.set({setup:function(){b.on("draggable.drop",f)},destroy:function(){b.off("draggable.drop",f)}}),a}}),glue.module.create("glue/component/fadable",["glue","glue/basecomponent"],function(a,b){"use strict";var c=a.sugar;return function(a){var d,e,f=b("fadable",a),g=!1,h=!1,i=.5,j=null;return f.set({update:function(a){var b=a.deltaT;g===!0?e-b*i>d?d+=i*b:(d=e,g=!1,null!==j&&j()):h===!0&&(d>e+b*i?d-=i*b:(d=e,h=!1,null!==j&&j()))},draw:function(a){a.context.globalAlpha=d},fade:function(a,b,f){d=b,e=f,g=f>b?!0:!1,h=b>f?!0:!1,c.isDefined(a)&&(j=a)},fadeIn:function(a,b){d=0,e=b||1,g=!0,c.isDefined(a)&&(j=a)},fadeOut:function(a,b){d=1,e=b||0,h=!0,c.isDefined(a)&&(j=a)},setAlpha:function(a){c.isNumber(a)&&(d=a)},getAlpha:function(){return d},setTargetAlpha:function(a){c.isNumber(a)&&(e=a)},getTargetAlpha:function(){return e},setFadeSpeed:function(a){c.isNumber(a)&&(i=a)},getFadeSpeed:function(){return i},atTarget:function(){return!g&&!h},register:function(){f.register("draw"),f.register("update")},unregister:function(){f.unregister("draw"),f.unregister("update")}}),a}}),glue.module.create("glue/component/hoverable",["glue","glue/basecomponent"],function(a,b){"use strict";return function(a){var c=b("hoverable",a),d="not hovered",e=function(b){return a.getBoundingBox().hasPosition(b.position)},f=function(b){e(b)?"not hovered"===d&&(a.hoverOver&&a.hoverOver(b),d="hovered"):"hovered"===d&&(a.hoverOut&&a.hoverOut(b),d="not hovered")};return c.set({pointerMove:function(a){f(a)},register:function(){c.register("pointerMove")},unregister:function(){c.unregister("pointerMove")}}),a}}),glue.module.create("glue/component/kineticable",["glue","glue/basecomponent","glue/math","glue/math/vector","glue/math/dimension","glue/math/rectangle","glue/math/circle","glue/sat"],function(a,b,c,d,e,f,g,h){"use strict";var i=a.sugar;return function(a){var j,k,l,m=b("kineticable",a),n=c(),o=d(0,0),p=d(0,0),q=d(0,0),r=d(0,0),s=d(0,0),t=e(0,0),u=!0,v=0,w=d(1,1);return m.set({setup:function(b){i.isDefined(b)&&(i.isDefined(b.gravity)&&this.setGravity(b.gravity),i.isDefined(b.bounce)&&this.setBounce(b.bounce),i.isDefined(b.velocity)&&this.setVelocity(b.velocity),i.isDefined(b.maxVelocity)&&this.setMaxVelocity(b.maxVelocity),i.isDefined(b.radius)&&this.setRadius(b.radius),i.isDefined(b.dynamic)&&this.setDynamic(b.dynamic)),q=a.getPosition(),k=a.getOrigin(),i.isDefined(a.scalable)&&(w=a.scalable.getScale()),t=i.isDefined(a.animatable)?a.animatable.getDimension():a.getDimension(),t.width*=w.x,t.height*=w.y,i.isUndefined(j)&&(l=Math.max(t.width,t.height),j=Math.sqrt(-l/2*(-l/2)+-l/2*(-l/2)))},update:function(){r.x=r.y=0,o.add(p),0!==s.x&&Math.abs(o.x)>s.x&&(o.x=s.x*n.sign(o.x)),0!==s.y&&Math.abs(o.y)>s.y&&(o.y=s.y*n.sign(o.y)),q.add(o),a.setPosition(q)},setVelocity:function(a){if(!i.isVector(a))throw"The argument must be a Vector";o=a},setGravity:function(a){if(!i.isVector(a))throw"The argument must be a Vector";p=a},setDimension:function(a){if(!i.isDimension(t))throw"The argument must be a Dimension";t=a},setDynamic:function(a){if(!i.isBoolean(a))throw"The argument must be a Boolean";u=a},setBounce:function(a){if(!i.isNumber(a))throw"The argument must be a Number";v=a},setRadius:function(a){if(!i.isNumber(a))throw"The argument must be a Number";j=a},setPosition:function(b){if(!i.isVector(b))throw"The argument must be a Vector";a.setPosition(b)},setSide:function(a){if(!i.isVector(a))throw"The argument must be a Vector";r=a},setMaxVelocity:function(a){if(!i.isVector(a))throw"The argument must be a Vector";s=a},getVelocity:function(){return o},getGravity:function(){return p},getPosition:function(){return q},getDimension:function(){return t},isDynamic:function(){return u},getBounce:function(){return v},getRadious:function(){return j},getMaxVelocity:function(){return s},isTouching:function(a){return a===h.TOP&&r.y>0||a===h.BOTTOM&&r.y<0||a===h.LEFT&&r.x>0||a===h.RIGHT&&r.x<0},toRectangle:function(){return f(q.x-k.x*Math.abs(w.x),q.y-k.y*Math.abs(w.y),t.width,t.height)},toCircle:function(){return g(q.x+t.width/2,q.y+t.height/2,j)},getSide:function(){return r},register:function(){m.register("update")},unregister:function(){m.unregister("update")}}),a}}),glue.module.create("glue/component/movable",["glue","glue/basecomponent","glue/math/vector"],function(a,b){"use strict";var c=a.sugar;return function(a){var d,e=b("movable",a),f=null,g=100,h=!0,i=0;return e.set({update:function(b){var c=b.deltaT;if(null!==f){var e,j,k;d=a.getPosition(),j=f.x-d.x,k=f.y-d.y,Math.sqrt(j*j+k*k)<g*c?(h=!0,d=f,a.setPosition(d)):(e=Math.atan2(k,j),d.x+=Math.cos(e)*g*c,d.y+=Math.sin(e)*g*c,i=180*e/Math.PI,a.setPosition(d))}},hasTarget:function(){return null!==f},atTarget:function(){return h},getRotation:function(){return i},setTarget:function(a){if(!c.isObject(a)&&c.isDefined(a.x)&&c.isDefined(a.y))throw"Invalid target supplied";h=!1,f=a},setMoveSpeed:function(a){if(!c.isNumber(a))throw"Invalid speed supplied";g=a},register:function(){e.register("update")},unregister:function(){e.unregister("update")}}),a}}),glue.module.create("glue/component/plugin/spineable",["glue","glue/basecomponent","glue/math/rectangle","glue/math/vector","glue/math/dimension","glue/loader"],function(a,b,c,d,e,f){"use strict";var g=a.sugar;return function(a){var h,i=b("spineable",a),j={},k={},l={},m={},n={},o={},p="",q="",r=((new Date).getTime(),Array(8)),s=(c(0,0,0,0),{}),t={},u={},v={},w=function(b){var c=0;if(!g.isDefined(b))throw"Specify settings object to Spine";if(!g.isDefined(b.animation))throw"Specify animation to Spine";for("string"==typeof b.animation&&(b.animation=[b.animation]),c;c<b.animation.length;++c)p=b.animation[c],x(b.animation[c]),y(b.animation[c]);b.position&&a&&a.setPosition(b.position)},x=function(a){var b=f.getBinary(a),c={},d=f.getImage(a);j[p]=new spine.Atlas(b,{load:function(a){var b=d;a.image=b,a.width=b.width,a.height=b.height,c=a}}),j[p].updateUVs(c)},y=function(b){var c,d=0;for(l[p]=new spine.SkeletonJson(new spine.AtlasAttachmentLoader(j[p])),h.skeletonResolution&&(l[p].scale=h.skeletonResolution),m[p]=l[p].readSkeletonData(f.getJSON(b)),k[p]=new spine.Skeleton(m[p]),spine.Bone.yDown=!0,a&&(k[p].getRootBone().x=a.getPosition().x,k[p].getRootBone().y=a.getPosition().y),k[p].updateWorldTransform(),n[p]=new spine.AnimationStateData(m[p]),o[p]=new spine.AnimationState(n[p]),d;d<m[p].animations.length;++d){if(c=m[p].animations[d].name,g.has(v,c))throw"Animation with name "+c+" already exists";v[c]=p}z()},z=function(){var b=k[p],e=0,f=b.slots.length,g={},h={},i=c(0,0,0,0),j=b.getRootBone(),l=c(0,0,0,0);for(a&&(l.x1=a.getPosition().x,l.y1=a.getPosition().y),e;f>e;++e)g=b.slots[e],h=g.attachment,h instanceof spine.RegionAttachment&&(h.computeVertices(b.x,b.y,g.bone,r),i.x1=r[2],i.y1=r[3],i.setWidth(h.width),i.setHeight(h.height),l.union(i));s[p]=l,t[p]=d(0,0),t[p].x=l.x1-j.x,t[p].y=l.y1-j.y,u[p]=d(0,0),A()},A=function(){var b=s[p],c=b.getWidth(),d=b.getHeight();a&&a.setDimension(e(c,d))};return i.set({draw:function(b){var c,e,f,g,h,i,j,l,m,n,o,q,s=b.context,v={},w={},x=k[p],y=0,z=x.drawOrder.length,A=t[p],B=u[p],C=d(0,0);for(a&&(C=a.getPosition()),q=d(A.x+B.x,A.y+B.y),y;z>y;++y)v=x.drawOrder[y],w=v.attachment,w instanceof spine.RegionAttachment&&(w.computeVertices(x.x,x.y,v.bone,r),c=r[2]-q.x,e=r[3]-q.y,f=w.rendererObject.width,g=w.rendererObject.height,h=w.rendererObject.x,i=w.rendererObject.y,j=w.scaleX,l=w.scaleY,m=v.bone.scaleX,n=v.bone.scaleY,o=-(v.bone.worldRotation+w.rotation)*Math.PI/180,s.save(),s.translate(Math.round(c),Math.round(e)),s.rotate(o),s.globalAlpha=v.a,s.scale(m*j,n*l),s.drawImage(w.rendererObject.page.image,h,i,f,g,0,0,f,g),s.restore())},update:function(a){var b=k[p];return o[p].update(a.deltaT),o[p].apply(b),b.updateWorldTransform(),!0},setup:function(a){h=a,w(h)},setAnimation:function(b,c,d,e){if(!g.has(v,b))throw"There is no skeleton which contains an animation called "+b;return q===b?!1:(a.spineable.setSkeleton(v[b]),o[p].onComplete=g.isDefined(e)?e:null,g.isDefined(c)||(c=!0),g.isDefined(d)||(d=1),q=b,o[p].setAnimationByName(0,b,c),o[p].timeScale=d,k[p].setSlotsToSetupPose(),!0)},getAnimation:function(){return q},getRootBone:function(){return k[p].getRootBone()},getSkeletonResolution:function(){return l[p].scale},addSkeleton:function(a){w(a)},setSkeleton:function(a){p!==a&&(p=a,A())},getSkeleton:function(){return p},setOrigin:function(a,b){if(g.has(u,b))throw"This skeleton doesn't exist: "+b;u[b]=a,p===b&&A()},getOrigin:function(){return u[p]},resetOrigin:function(){u[p]={x:-t[p].x,y:-t[p].y},A()},register:function(){i.register("draw"),i.register("update")},unregister:function(){i.unregister("draw"),i.unregister("update")}}),a}}),glue.module.create("glue/component/rotatable",["glue","glue/basecomponent","glue/math/vector"],function(a,b){"use strict";var c=a.sugar;return function(a){var d=b("rotatable",a),e=0,f=100,g=0,h=1,i=180/Math.PI,j=!0,k=Math.PI/180;return d.set({update:function(b){var c,d,i,k,l=b.deltaT,m=a.rotatable;e!==g&&(c=m.getTargetDegree(),d=m.getAngleDegree(),i=f*h,k=c>d?c-d:d-c,Math.floor(Math.abs(k))<Math.abs(i*l)?(e=g,j=!0):(d+=i*l,m.setAngleDegree(d)))},draw:function(a){a.context.rotate(e)},setAngleDegree:function(a){e=c.isNumber(a)?a:e,e*=k},setAngleRadian:function(a){e=c.isNumber(a)?a:e},setTargetDegree:function(a,b){g=c.isNumber(a)?a:g,g*=k,c.isDefined(b)&&(h=b?1:-1),j=!1},setTargetRadian:function(a,b){g=c.isNumber(a)?a:g,c.isDefined(b)&&(h=b?1:-1),j=!1},setSpeed:function(a){f=c.isNumber(a)?a:f,f=Math.floor(f)},getAngleDegree:function(){return e*i},getAngleRadian:function(){return e},getTargetDegree:function(){return g*i},getTargetRadian:function(){return g},atTarget:function(){return j},register:function(){d.register("draw"),d.register("update")},unregister:function(){d.unregister("draw"),d.unregister("update")}}),a}}),glue.module.create("glue/component/scalable",["glue","glue/basecomponent","glue/math/vector","glue/math/dimension"],function(a,b,c,d){"use strict";var e=a.sugar;return function(a){var f=b("scalable",a),g=c(1,1),h=c(1,1),i=1,j=!0;return f.set({update:function(a){if(!j){var b,c,d,e=a.deltaT,f=this.scalable;c=h.x-g.x,d=h.y-g.y,Math.sqrt(c*c+d*d)<i*e?(j=!0,f.setScale(h)):(b=Math.atan2(d,c),g.x+=Math.cos(b)*i*e,g.y+=Math.sin(b)*i*e)}},draw:function(a){a.context.scale(g.x,g.y)},setScale:function(b){g.x=e.isNumber(b.x)?b.x:g.x,g.y=e.isNumber(b.y)?b.y:g.y,h.x=e.isNumber(b.x)?b.x:h.x,h.y=e.isNumber(b.y)?b.y:h.y,a.updateBoundingBox()},setTarget:function(a){h.x=e.isNumber(a.x)?a.x:h.x,h.y=e.isNumber(a.y)?a.y:h.y,j=!1},setSpeed:function(a){i=e.isNumber(a)?a:i,i/=100},getScale:function(){return g},getTarget:function(){return h},getSpeed:function(){return 100*i},atTarget:function(){return j},getDimension:function(){var b;return b=e.isDefined(a.animatable)?a.animatable.getDimension():e.isDefined(a.spritable)?a.getDimension():d(1,1),d(b.width*g.x,b.height*g.y)},register:function(){f.register("draw"),f.register("update")},unregister:function(){f.unregister("draw"),f.unregister("update")}}),a}}),glue.module.create("glue/component/spritable",["glue","glue/math/vector","glue/math/dimension","glue/math/rectangle","glue/basecomponent"],function(a,b,c,d,e){"use strict";a.sugar;return function(a){var d=e("spritable",a),f=null;return d.set({setup:function(d){var e;d&&(d.image&&(f=d.image),f=d.image,d.position&&(e=d.position,a.setPosition(b(Math.round(e.x),Math.round(e.y)))),d.dimension?a.setDimension(d.dimension):f&&a.setDimension(c(f.naturalWidth,f.naturalHeight)),d.origin&&a.setOrigin(d.origin))},draw:function(b){a.animatable||b.context.drawImage(f,0,0)},setImage:function(b){f=b,a.setDimension(c(f.naturalWidth,f.naturalHeight))},getImage:function(){return f},register:function(){d.register("draw")},unregister:function(){d.unregister("draw")}}),a}}),glue.module.create("glue/component/tweenable",["glue","glue/basecomponent","glue/math"],function(a,b,c){"use strict";var d=a.sugar;return function(a){var e=b("tweenable",a),f=c(),g=["easeInQuad","easeOutQuad","easeInOutQuad","easeInCubic","easeOutCubic","easeInOutCubic","easeInQuart","easeOutQuart","easeInOutQuart","easeInQuint","easeOutQuint","easeInOutQuint","easeInSine","easeOutSine","easeInOutSine","easeInExpo","easeOutExpo","easeInOutExpo","easeInCirc","easeOutCirc","easeInOutCirc","easeInElastic","easeOutElastic","easeInOutElastic","easeInBack","easeOutBack","easeInOutBack","easeInBounce","easeOutBounce","easeInOutBounce"];return e.set({getRandomTween:function(){var a=g[f.random(0,g.length)];return d.isString(a)?a:"easeInQuad"},easeInQuad:function(a,b,c,d){return c*(a/=d)*a+b},easeOutQuad:function(a,b,c,d){return-c*(a/=d)*(a-2)+b},easeInOutQuad:function(a,b,c,d){return(a/=d/2)<1?c/2*a*a+b:-c/2*(--a*(a-2)-1)+b},easeInCubic:function(a,b,c,d){return c*(a/=d)*a*a+b},easeOutCubic:function(a,b,c,d){return c*((a=a/d-1)*a*a+1)+b},easeInOutCubic:function(a,b,c,d){return(a/=d/2)<1?c/2*a*a*a+b:c/2*((a-=2)*a*a+2)+b},easeInQuart:function(a,b,c,d){return c*(a/=d)*a*a*a+b},easeOutQuart:function(a,b,c,d){return-c*((a=a/d-1)*a*a*a-1)+b},easeInOutQuart:function(a,b,c,d){return(a/=d/2)<1?c/2*a*a*a*a+b:-c/2*((a-=2)*a*a*a-2)+b},easeInQuint:function(a,b,c,d){return c*(a/=d)*a*a*a*a+b},easeOutQuint:function(a,b,c,d){return c*((a=a/d-1)*a*a*a*a+1)+b},easeInOutQuint:function(a,b,c,d){return(a/=d/2)<1?c/2*a*a*a*a*a+b:c/2*((a-=2)*a*a*a*a+2)+b},easeInSine:function(a,b,c,d){return-c*Math.cos(a/d*(Math.PI/2))+c+b},easeOutSine:function(a,b,c,d){return c*Math.sin(a/d*(Math.PI/2))+b},easeInOutSine:function(a,b,c,d){return-c/2*(Math.cos(Math.PI*a/d)-1)+b},easeInExpo:function(a,b,c,d){return 0==a?b:c*Math.pow(2,10*(a/d-1))+b},easeOutExpo:function(a,b,c,d){return a==d?b+c:c*(-Math.pow(2,-10*a/d)+1)+b},easeInOutExpo:function(a,b,c,d){return 0==a?b:a==d?b+c:(a/=d/2)<1?c/2*Math.pow(2,10*(a-1))+b:c/2*(-Math.pow(2,-10*--a)+2)+b},easeInCirc:function(a,b,c,d){return-c*(Math.sqrt(1-(a/=d)*a)-1)+b},easeOutCirc:function(a,b,c,d){return c*Math.sqrt(1-(a=a/d-1)*a)+b},easeInOutCirc:function(a,b,c,d){return(a/=d/2)<1?-c/2*(Math.sqrt(1-a*a)-1)+b:c/2*(Math.sqrt(1-(a-=2)*a)+1)+b},easeInElastic:function(a,b,c,d){var e=1.70158,f=0,g=c;if(0==a)return b;if(1==(a/=d))return b+c;if(f||(f=.3*d),g<Math.abs(c)){g=c;var e=f/4}else var e=f/(2*Math.PI)*Math.asin(c/g);return-(g*Math.pow(2,10*(a-=1))*Math.sin(2*(a*d-e)*Math.PI/f))+b},easeOutElastic:function(a,b,c,d){var e=1.70158,f=0,g=c;if(0==a)return b;if(1==(a/=d))return b+c;if(f||(f=.3*d),g<Math.abs(c)){g=c;var e=f/4}else var e=f/(2*Math.PI)*Math.asin(c/g);return g*Math.pow(2,-10*a)*Math.sin(2*(a*d-e)*Math.PI/f)+c+b},easeInOutElastic:function(a,b,c,d){var e=1.70158,f=0,g=c;if(0==a)return b;if(2==(a/=d/2))return b+c;if(f||(f=.3*d*1.5),g<Math.abs(c)){g=c;var e=f/4}else var e=f/(2*Math.PI)*Math.asin(c/g);return 1>a?-.5*g*Math.pow(2,10*(a-=1))*Math.sin(2*(a*d-e)*Math.PI/f)+b:g*Math.pow(2,-10*(a-=1))*Math.sin(2*(a*d-e)*Math.PI/f)*.5+c+b},easeInBack:function(a,b,c,d,e){return void 0==e&&(e=1.70158),c*(a/=d)*a*((e+1)*a-e)+b},easeOutBack:function(a,b,c,d,e){return void 0==e&&(e=1.70158),c*((a=a/d-1)*a*((e+1)*a+e)+1)+b},easeInOutBack:function(a,b,c,d,e){return void 0==e&&(e=1.70158),(a/=d/2)<1?c/2*a*a*(((e*=1.525)+1)*a-e)+b:c/2*((a-=2)*a*(((e*=1.525)+1)*a+e)+2)+b},easeInBounce:function(a,b,c,d){return c-this.easeOutBounce(d-a,0,c,d)+b},easeOutBounce:function(a,b,c,d){return(a/=d)<1/2.75?7.5625*c*a*a+b:2/2.75>a?c*(7.5625*(a-=1.5/2.75)*a+.75)+b:2.5/2.75>a?c*(7.5625*(a-=2.25/2.75)*a+.9375)+b:c*(7.5625*(a-=2.625/2.75)*a+.984375)+b},easeInOutBounce:function(a,b,c,d){return d/2>a?.5*this.easeInBounce(2*a,0,c,d)+b:.5*this.easeOutBounce(2*a-d,0,c,d)+.5*c+b}}),a}}),glue.module.create("glue/director",["glue","glue/game","glue/screen"],function(a,b){"use strict";var c=a.sugar,d={},e=null,f=function(a){return c.isString(a)&&c.isObject(d[a])?d[a]:void 0},g=function(a,d){var g,h,i,j=0;if(c.isString(a)){for(g=f(a),"show"===d&&(b.add(g),g.setShown(!0)),"hide"===d&&(b.remove(g),g.setShown(!1)),h=g.getObjects(),i=h.length,j;i>j;++j)"show"===d?b.add(h[j]):"hide"===d&&b.remove(h[j]);"show"===d&&(e=g)}},h={addScreen:function(a){c.isFunction(a.getName)&&c.isObject(a)&&(d[a.getName()]=a)},removeScreen:function(a){var b;c.isFunction(a.getName)&&c.isObject(a)&&(b=a.getName(),g(b,"hide")),c.isObject(d[b])&&delete d[b]},getScreens:function(){return d},showScreen:function(a){var b;c.isString(a)&&(null!==e&&(b=e.getName(),g(b,"hide")),g(a,"show"))},hideScreen:function(a){c.isString(a)&&g(a,"hide")}};return h}),glue.module.create("glue/event/system",function(){var a=[],b=function(b,c,d){var e,f,g=a.length;if(g>0)for(e=0;g>e;++e)f=a[e],f&&f.name===c&&f.callback.apply({name:c,emitter:b},d)};return{on:function(b,c){return a.push({name:b,callback:c}),[b,c]},off:function(b,c){var d,e,f;for(d=0,e=a.length;e>d;++d)f=a[d],f&&f.name===b&&f.callback===c&&a.splice(d,1)},fire:function(a){b("system",a,Array.prototype.slice.call(arguments,1,arguments.length))}}}),glue.module.create("glue/game",["glue","glue/domready","glue/math/vector","glue/event/system","glue/loader"],function(a,b,c,d,e){"use strict";var f,g,h=a.sugar,i=null,j=null,k=[],l=[],m=[],n=[],o=[],p=(new Date).getTime(),q=null,r=null,s=null,t=null,u=!1,v=null,w={},x=c(0,0),y=!1,z=!1,A=!1,B=null,C=0,D=0,E=5e5,F=!0,G=0,H={},I=function(){q=document.querySelector("#"+g),null===q&&(q=document.createElement("canvas"),q.id=g,q.width=v.width,q.height=v.height,null!==document.getElementById("wrapper")?document.getElementById("wrapper").appendChild(q):document.body.appendChild(q)),J(),q.getContext&&(u=!0,r=q.getContext("2d"),s=document.createElement("canvas"),s.width=q.width,s.height=q.height,t=s.getContext("2d")),H={canvas:q,context:r,backBufferCanvas:s,backBufferContext2D:t,canvasScale:w,canvasDimension:v,scroll:x}},J=function(){var a,b,c=q.height/q.width,d=window.innerHeight/window.innerWidth;c>d?(b=window.innerHeight,a=b/c):(a=window.innerWidth,b=a*c),w.x=a/v.width,w.y=b/v.height,q.style.width=a+"px",q.style.height=b+"px"},K=function(){G===bb.SORT_TYPE_STABLE?h.sort.stable.inplace(k,function(a,b){return a.z-b.z}):k.sort(function(a,b){return a.z-b.z})},L=function(){var a,b,c,d;if(l.length){for(c=0;c<l.length;++c)a=l[c],k.push(l[c]),a.init&&a.init();if(l=[],n.length){for(d=0;d<n.length;++d)b=n[d],b&&b.callback(b.object);n=[]}}},M=function(){var a,b,c,d;if(m.length){for(c=0;c<m.length;++c)a=m[c],a.destroy&&a.destroy(),h.removeObject(k,a);if(m=[],o.length){for(d=0;d<o.length;++d)b=o[d],b&&b.callback(b.object);o=[]}}},N=function(){t.clear(!0),r.clear(!0)},O=function(a){var b,c,d,e;if(y&&requestAnimationFrame(O),u){if(F&&K(),N(),M(),L(),b=(a-p)/1e3,A&&(c=Math.round(1e3/(a-p),2),C+=c,++D,e=Math.round(C/D),C>E&&(C=D=0),B.innerHTML="<strong>Glue debug bar</strong>",B.innerHTML+="<br />version: 0.9.7",B.innerHTML+="<br />frame rate: "+c+" fps",B.innerHTML+="<br />average frame rate: "+e+"fps",B.innerHTML+="<br />objects: "+k.length,f&&f.name&&(B.innerHTML+="<br />game name: "+f.name)),1>b){H.deltaT=b,H.fps=c,H.avg=e,H.objectLength=k.length;for(var g=0;g<k.length;++g)d=k[g],d.update&&(z&&d.updateWhenPaused||!z)&&d.update(H),d.draw&&d.draw(H)}r.drawImage(s,0,0),p=a}},P=function(){I(),_(),O(0)},Q=function(a){var b,c,d;if(y)for(b=0,c=k.length;c>b;++b)d=k[b],d.pointerDown&&(z&&d.updateWhenPaused||!z)&&d.pointerDown(a)},R=function(a){var b,c,d;if(y)for(b=0,c=k.length;c>b;++b)d=k[b],d.pointerMove&&(z&&d.updateWhenPaused||!z)&&d.pointerMove(a)},S=function(a){var b,c,d;if(y)for(b=0,c=k.length;c>b;++b)d=k[b],d.pointerUp&&(z&&d.updateWhenPaused||!z)&&d.pointerUp(a)},T=function(a,b){var d=b?a.changedTouches[0]:a.targetTouches[0];a.preventDefault(),a.position=c((d.pageX-q.offsetLeft)/w.x,(d.pageY-q.offsetTop)/w.y)},U=function(a){a.position=c((a.clientX-q.offsetLeft)/w.x,(a.clientY-q.offsetTop)/w.y)},V=function(a){a.preventDefault(),T(a),Q(a)},W=function(a){a.preventDefault(),T(a),R(a)},X=function(a){a.preventDefault(),T(a,!0),S(a)},Y=function(a){a.preventDefault(),U(a),Q(a)},Z=function(a){a.preventDefault(),U(a),R(a)},$=function(a){a.preventDefault(),U(a),S(a)},_=function(){"ontouchstart"in i?(q.addEventListener("touchstart",V),q.addEventListener("touchmove",W),q.addEventListener("touchend",X)):(q.addEventListener("mousedown",Y),q.addEventListener("mousemove",Z),q.addEventListener("mouseup",$)),d.on("glue.pointer.down",Q),d.on("glue.pointer.move",R),d.on("glue.pointer.up",S),window.addEventListener("resize",J,!1),window.addEventListener("orientationchange",J,!1),document.body.addEventListener("touchstart",function(a){return a&&a.preventDefault&&a.preventDefault(),a&&a.stopPropagation&&a.stopPropagation(),!1}),document.body.addEventListener("touchmove",function(a){return a&&a.preventDefault&&a.preventDefault(),a&&a.stopPropagation&&a.stopPropagation(),!1})},ab=function(){q.removeEventListener("touchstart",V),q.removeEventListener("touchmove",W),q.removeEventListener("touchend",X),d.off("glue.pointer.down",Q),d.off("glue.pointer.move",R),d.off("glue.pointer.up",S),k=[]},bb={SORT_TYPE_DEFAULT:0,SORT_TYPE_STABLE:1,setup:function(a,c){b(function(){if(y)throw"Glue: The main game is already running";y=!0,i=window,j=i.document,g=a.canvas.id,v=a.canvas.dimension,a.game&&(f=a.game),a.develop&&a.develop.debug&&(A=!0,B=document.createElement("div"),B.id="debugBar",document.body.appendChild(B)),h.isDefined(a.sort)&&(F=a.sort),h.isDefined(a.sortType)&&(G=a.sortType),a.asset&&a.asset.path?(e.setAssetPath(a.asset.path),a.asset.image&&e.setAssets(e.ASSET_TYPE_IMAGE,a.asset.image),a.asset.audio&&(a.asset.audio.sprite&&e.setAssets(e.ASSET_TYPE_AUDIOSPRITE,a.asset.audio.sprite),e.setAssets(e.ASSET_TYPE_AUDIO,a.asset.audio)),a.asset.json&&e.setAssets(e.ASSET_TYPE_JSON,a.asset.json),a.asset.binary&&e.setAssets(e.ASSET_TYPE_BINARY,a.asset.binary),a.asset.spine&&e.setAssets(e.ASSET_TYPE_SPINE,a.asset.spine),a.asset.remoteImage&&e.setAssets(e.ASSET_TYPE_IMAGE_REMOTE,a.asset.remoteImage),e.load(function(){P(),c&&c()})):(P(),c&&c())})},shutdown:function(){ab(),y=!1},add:function(a,b){b&&n.push({object:a,callback:b}),l.push(a)},remove:function(a,b){b&&o.push({object:a,callback:b}),m.push(a)},get:function(a){var b,c,d,e;for(b=0,c=k.length;c>b;++b)if(d=k[b],e=d.getName(),!h.isEmpty(e)&&e===a)return d},canvas:{getDimension:function(){return v},getScale:function(){return w},getContext:function(){return t}},getObjectCount:function(){return k.length},getScroll:function(){return x},pause:function(a){z=!0,y=!a},resume:function(){z=!1,y||(y=!0,P())}};return bb}),glue.module.create("glue/loader",["glue"],function(a){var b,c,d=a.audio,e=a.sugar,f=!1,g=0,h=0,i=null,j={},k={image:{},audio:{},json:{},binary:{}},l=document.getElementById("loader"),m=document.getElementById("loadbar"),n=document.getElementById("percentagebar"),o=function(){++h,c=Math.floor(h/g*100),null!==m&&(m.style.width=c+"%"),null!==n&&(n.innerHTML=c+"%"),g===h&&(null!==l&&(l.style.display="none"),f=!0,b())},p=function(a){throw"An error occurred while trying to load asset "+a},q=function(a,b,c){var d=new Image;d.src=b,d.addEventListener("load",c,!1),k.image[a]=d},r=function(a,b,c){var e=new d({urls:[b],onload:c});k.audio[a]=e},s=function(a,b,c,d){var e=new XMLHttpRequest;e.overrideMimeType&&e.overrideMimeType("application/json"),e.open("GET",b,!0),e.onerror=function(){d(a)},e.ontimeout=function(){d(a)},e.onreadystatechange=function(){4===e.readyState&&(200===e.status||0===e.status&&e.responseText?(k.json[a]=JSON.parse(e.responseText),c()):d(a))},e.send(null)},t=function(a,b,c,d){var e,f,g,h=new XMLHttpRequest,i=0;h.open("GET",b,!0),h.onerror=function(){d(a)},h.responseType="arraybuffer",h.onload=function(){if(e=h.response){for(f=new Uint8Array(e),g=[],i;i<f.byteLength;++i)g[i]=String.fromCharCode(f[i]);k.binary[a]=g.join(""),c()}},h.send()},u=function(a,b,c,e){var f,g,h=function(){g=k.json[a+"_json"],g.onload=function(){k.audio[a]=f,c()},f=new d(g),c()};s(a+"_json",i+"json/"+b,h,e)},v=function(a,b,c,d){var e=!1,f=!1,g=!1,h=function(){e&&f&&g&&c()};q(a,b+".png",function(){e=!0,h()},d),t(a,b+".atlas",function(){g=!0,h()},d),s(a,b+".json",function(){f=!0,h()},d)},w=function(a,b,c){switch(b){case x.ASSET_TYPE_IMAGE_REMOTE:q(a,c,o,p);break;case x.ASSET_TYPE_IMAGE:q(a,i+"image/"+c,o,p);break;case x.ASSET_TYPE_AUDIO:r(a,i+"audio/"+c,o,p);break;case x.ASSET_TYPE_JSON:s(a,i+"json/"+c,o,p);break;case x.ASSET_TYPE_BINARY:t(a,i+"binary/"+c,o,p);break;case x.ASSET_TYPE_AUDIOSPRITE:u(a,c,o,p);break;case x.ASSET_TYPE_SPINE:v(a,i+"spine/"+c,o,p)}},x={ASSET_TYPE_IMAGE:"image",ASSET_TYPE_AUDIO:"audio",ASSET_TYPE_JSON:"json",ASSET_TYPE_BINARY:"binary",ASSET_TYPE_AUDIOSPRITE:"audiosprite",ASSET_TYPE_SPINE:"spine",ASSET_TYPE_IMAGE_REMOTE:"remoteimage",setAssetPath:function(a){i=a},setAssets:function(a,b){j[a]=b;for(asset in b)b.hasOwnProperty(asset)&&++g},load:function(a){var c;
null!==n&&(n.innerHTML="0%"),b=a;for(type in j)if(j.hasOwnProperty(type)){c=j[type];for(name in c)c.hasOwnProperty(name)&&w(name,type,c[name])}},isLoaded:function(){return f},getAssets:function(){if(!f)throw"Assets are not loaded yet";return k},getImage:function(a){if(!f)throw"Asset "+a+" is not loaded yet";return k.image[a]},getAudio:function(a){if(!f)throw"Asset "+a+" is not loaded yet";return k.audio[a]},getJSON:function(a){if(!f)throw"Asset "+a+" is not loaded yet";return k.json[a]},getBinary:function(a){if(!f)throw"Asset "+a+" is not loaded yet";return k.binary[a]},getAsset:function(a){if(!f)throw"Asset "+a+" is not loaded yet";if(e.has(k.image,a))return k.image[a];if(e.has(k.audio,a))return k.audio[a];if(e.has(k.json,a))return k.json[a];if(e.has(k.binary,a))return k.binary[a];throw"Asset "+a+" could not be found"}};return x}),glue.module.create("glue/math",["glue","glue/math/rectangle","glue/math/dimension","glue/math/matrix","glue/math/vector"],function(a,b,c,d,e){"use strict";return function(){var f=a.sugar;return{Dimension:c,Matrix:d,Vector:e,random:function(a,b){return~~(Math.random()*(b-a+1))+a},square:function(a){return a*a},sign:function(a){if(f.isNumber(a)){if(a>0)return 1;if(0>a)return-1;if(0===a)return 0}},getHalfRectangle:function(a){var c=b(a.x1+a.x2/2,a.y1+a.y2/2,a.x2/2,a.y2/2);return c}}}}),glue.module.create("glue/math/array2d",["glue"],function(a){"use strict";var b=a.sugar;return function(a,c,d){var e,f,g,h=[];for(f=0;a>f;++f){for(e=[],g=0;c>g;++g)e[g]=d||null;h[f]=e}return{get:function(){return h},getValue:function(a,b){return void 0!==h[a]&&void 0!==h[a][b]?h[a][b]:void 0},iterate:function(d){for(f=0;a>f;++f)for(g=0;c>g;++g){if(!b.isFunction(d))throw"Please supply a callback function";d(f,g,h[f][g])}},set:function(a,b,c){void 0!==h[a]&&void 0!==h[a][b]&&(h[a][b]=c)},unset:function(a,b){void 0!==h[a]&&void 0!==h[a][b]&&(h[a][b]=null)}}}}),glue.module.create("glue/math/circle",["glue"],function(a){var b=a.sugar,c=function(a,d,e){return{x:a||0,y:d||0,radius:e||0,addVector:function(a){if(!b.isVector(a))throw"The argument should be a Vector";this.x+=a.x,this.y+=a.y},substractVector:function(a){if(!b.isVector(a))throw"The argument should be a Vector";this.x-=a.x,this.y-=a.y},clone:function(){return c(this.x,this.y,this.radius)}}};return c}),glue.module.create("glue/math/dimension",function(){"use strict";return function(a,b,c){var d={width:a,height:b,depth:c||0};return{width:d.width,height:d.height,depth:d.depth,get:function(){return d}}}}),glue.module.create("glue/math/matrix",["glue"],function(a){"use strict";var b=a.sugar,c=function(a,d){var e,f,g=[],h=b.isDefined(a)?a:0,i=b.isDefined(d)?d:0,j=function(a,b,c){g[b*h+a]=c},k=function(a,b){return g[b*h+a]};for(f=0;i>f;++f)for(e=0;h>e;++e)e===f?j(e,f,1):j(e,f,0);return{stringify:function(){var a="",b="";for(f=0;i>f;++f){for(e=0;h>e;++e)b+=k(e,f)+"	";a+=b+"\n",b=""}return a},get:function(a,b){return k(a,b)},set:function(a,b,c){j(a,b,c)},setValues:function(a){var b=Math.min(g.length,a.length);for(e=0;b>e;++e)g[e]=a[e];return this},getWidth:function(){return h},getHeight:function(){return i},iterate:function(a){for(f=0;i>f;++f)for(e=0;h>e;++e){if(!b.isFunction(a))throw"Please supply a callback function";a(e,f,k(e,f))}},transpose:function(){var a=[];for(e=0;h>e;++e)for(f=0;i>f;++f)a[e*i+f]=k(e,f);return g=a,i=[h,h=i][0],this},add:function(a){if(i!=a.getHeight()||h!=a.getWidth())throw"Matrix sizes incorrect";for(f=0;i>f;++f)for(e=0;h>e;++e)j(e,f,k(e,f)+a.get(e,f));return this},multiply:function(a){var b,c=[],d=h,j=i,l=a.getHeight(),m=a.getWidth(),n=0;if(j!=m)throw"Matrix sizes incorrect";for(f=0;l>f;++f)for(e=0;d>e;++e){for(n=0,b=0;m>b;++b)n+=a.get(b,f)*k(e,b);c[f*d+e]=n}return g=c,h=d,i=l,this},clone:function(){var a=c(h,i);return a.setValues(g),a},"static":{add:function(a,b){var c=a.clone();return c.add(b),c},multiply:function(a,b){var c=b.clone();return c.multiply(a),c}}}};return c}),glue.module.create("glue/math/polygon",function(){"use strict";return function(a){return{get:function(){return a},hasPosition:function(b){var c,d=!1,e=a[0].x,f=a[0].x,g=a[0].y,h=a[0].y,i=1,j=0,k=a.length-1;for(i=1;i<a.length;++i)c=a[i],e=Math.min(c.x,e),f=Math.max(c.x,f),g=Math.min(c.y,g),h=Math.max(c.y,h);if(b.x<e||b.x>f||b.y<g||b.y>h)return!1;for(k;j<a.length;k=j++)a[j].y>b.y!=a[k].y>b.y&&b.x<(a[k].x-a[j].x)*(b.y-a[j].y)/(a[k].y-a[j].y)+a[j].x&&(d=!d);return d}}}}),glue.module.create("glue/math/rectangle",function(){"use strict";return function(a,b,c,d){return{x1:a,y1:b,x2:c,y2:d,get:function(){return{x1:this.x1,y1:this.y1,x2:this.x2,y2:this.y2}},hasPosition:function(a){return a.x>=this.x1&&a.x<=this.x2&&a.y>=this.y1&&a.y<=this.y2?!0:void 0},getWidth:function(){return this.x2-this.x1},getHeight:function(){return this.y2-this.y1},setWidth:function(a){this.x2=this.x1+a},setHeight:function(a){this.y2=this.y1+a},union:function(a){this.x1=Math.min(this.x1,a.x1),this.y1=Math.min(this.y1,a.y1),this.x2=Math.max(this.x2,a.x2),this.y2=Math.max(this.y2,a.y2)},intersect:function(a){return this.x1+this.x2>a.x1&&this.x1<a.x1+a.x2&&this.y1+this.y2>a.y1&&this.y1<a.y1+a.y2},intersection:function(a){var b={x1:0,y1:0,x2:0,y2:0};return this.intersect(a)&&(b.x1=Math.max(this.x1,a.x1),b.y1=Math.max(this.y1,a.y1),b.x2=Math.min(this.x1+this.x2,a.x1+a.x2)-b.x1,b.y2=Math.min(this.y1+this.y2,a.y1+a.y2)-b.y1),b}}}}),glue.module.create("glue/math/vector",["glue/math"],function(a){"use strict";var b=function(c,d){var e=a();return{x:c,y:d,get:function(){return{x:this.x,y:this.y}},add:function(a){return this.x+=a.x,this.y+=a.y,this},substract:function(a){return this.x-=a.x,this.y-=a.y,this},angle:function(a){return Math.atan2(a.y-this.y,a.x-this.x)},dotProduct:function(a){return this.x*a.x+this.y*a.y},distance:function(a){return Math.sqrt((this.x-a.x)*(this.x-a.x)+(this.y-a.y)*(this.y-a.y))},multiply:function(a){return this.x*=a.x,this.y*=a.y,this},scale:function(a){return this.x*=a,this.y*=a,this},length:function(){return Math.sqrt(e.square(this.x)+e.square(this.y))},normalize:function(a){return this.x/=a>0?a:1,this.y/=a>0?a:1,this},copy:function(a){return this.x=a.x,this.y=a.y,this},clone:function(){return b(this.x,this.y)},toMatrix:function(){var a=e.Matrix(1,3);return a.set(0,0,this.x),a.set(0,1,this.y),a.set(0,2,1),a},"static":{add:function(a,b){var c=a.clone();return c.add(b),c},substract:function(a,b){var c=a.clone();return c.substract(b),c},angle:function(a,b){return a.angle(b)},dotProduct:function(a,b){return a.dotProduct(b)},distance:function(a,b){return a.distance(b)},multiply:function(a,b){var c=a.clone();return c.multiply(b),c},scale:function(a,b){var c=a.clone();return c.scale(b),c},length:function(a){var b=a.clone();return b.length()},normalize:function(a,b){var c=a.clone();return c.normalize(b),c},copy:function(a,b){var c=a.clone();return c.copy(b),c},clone:function(a){return a.clone()}}}};return b}),glue.module.create("glue/sat",["glue","glue/math","glue/math/vector","glue/math/rectangle","glue/math/dimension","glue/game"],function(a,b,c,d){"use strict";var e=a.sugar,f=b(),g=function(a,b,c,d){var e;return c.copy(a),c.substract(b),e=c.length(),e>a.radius+b.radius?(c.x=c.y=0,!1):(c.normalize(e),d.copy(c),c.scale(a.radius+b.radius-e),!0)},h=function(a,b,d,e,g){if(a.intersect(b)){var h=a.intersection(b),i=c(0,0);return h.x2>h.y2?(i.y=f.sign(a.y1-b.y1),d.y+=h.y2*i.y,e.y=i.y):(i.x=f.sign(a.x1-b.x1),d.x+=h.x2*i.x,e.x=i.x),g.x1=h.x1,g.y1=h.y1,g.x2=h.x2,g.y2=h.y2,!0}return!1},i=function(a,b){return a.intersect(b)},j=function(a,b){var c=Math.sqrt(f.square(a.x-b.x)+f.square(a.y-b.y));return c<a.radius+b.radius},k=function(a,b){var c=a.kineticable.getVelocity(),d=a.kineticable.getBounce(),e=b.scale(c.dotProduct(b)),f=c.static.substract(c,e),g=f.substract(e),h=g.substract(c).scale(d);c.add(h),a.kineticable.setVelocity(c)},l=function(a,b){var d,e,f=a.kineticable.toCircle(),h=b.kineticable.toCircle(),i=c(0,0),j=c(0,0),l=c(0,0),m=c(0,0);return g(f,h,j,m)?(b.kineticable.isDynamic()&&(e=b.kineticable.getPosition(),e.substract(j),k(b,m)),a.kineticable.isDynamic()&&(g(h,f,i,l),d=a.kineticable.getPosition(),d.substract(i),k(a,l)),!0):!1},m=function(a,b){var e,f,g,i,j=a.kineticable.toRectangle(),k=b.kineticable.toRectangle(),l=c(0,0),m=c(0,0),n=c(0,0),o=c(0,0),p=d(0,0,0,0);return h(j,k,m,o,p)?(b.kineticable.isDynamic()&&(f=b.kineticable.getVelocity(),i=b.kineticable.getPosition(),i.substract(m),o.scale(-1),b.kineticable.setPosition(i),b.kineticable.setSide(o),0!==o.y?(o.y>0&&f.y<0||o.y<0&&f.y>0&&p.y2>1)&&(f.y*=-b.kineticable.getBounce()):0!==o.x&&(o.x>0&&f.x<0||o.x<0&&f.x>0&&p.x2>1)&&(f.x*=-b.kineticable.getBounce())),a.kineticable.isDynamic()&&(e=a.kineticable.getVelocity(),g=a.kineticable.getPosition(),h(k,j,l,n,p),g.substract(l),n.scale(-1),a.kineticable.setPosition(g),a.kineticable.setSide(n),0!==n.y?(n.y>0&&e.y<0||n.y<0&&e.y>0)&&(e.y*=-a.kineticable.getBounce()):0!==n.x&&(n.x>0&&e.x<0||n.x<0&&e.x>0)&&(e.x*=-a.kineticable.getBounce())),!0):!1},n={TOP:0,BOTTOM:1,LEFT:2,RIGHT:3,RECTANGLE_TO_RECTANGLE:10,CIRCLE_TO_CIRCLE:20,collideGroupVsGroup:function(a,b,c){var d,f;if(!e.isArray(a)||!e.isArray(b))throw"The colliding groups must be Arrays.";for(d=0,f=a.length;f>d;++d)n.collideGroup(a[d],b,c)},collideGroup:function(a,b,c){var d,f;if(!e.isArray(b))throw"The colliding group must be an Array.";if(!e.isDefined(a.kineticable))throw"Collisions can only be tested between Kineticable.";for(d=0,f=b.length;f>d;++d)b.indexOf(a)!==d&&n.collide(a,b[d],c)},collide:function(a,b,c){if(e.isDefined(a.kineticable)&&e.isDefined(b.kineticable)){switch(c=c||n.RECTANGLE_TO_RECTANGLE){case n.RECTANGLE_TO_RECTANGLE:return m(a,b);case n.CIRCLE_TO_CIRCLE:return l(a,b);default:throw"The type of collision is not valid."}return!1}throw"Collisions can only be tested between Kineticable."},overlap:function(a,b,c){if(e.isDefined(a.kineticable)&&e.isDefined(b.kineticable)){switch(c=c||n.RECTANGLE_TO_RECTANGLE){case n.RECTANGLE_TO_RECTANGLE:return i(a,b);case n.CIRCLE_TO_CIRCLE:return j(a,b);default:return i(a,b)}return!1}throw"Collisions can only be tested between Kineticable."},overlapGroupVsGroup:function(a,b,c){var d,f;if(!e.isArray(a)||!e.isArray(b))throw"The colliding groups must be Arrays.";for(d=0,f=a.length;f>d;++d)n.overlapGroup(a[d],b,c)},overlapGroup:function(a,b,c){var d,f;if(!e.isArray(b))throw"The colliding group must be an Array.";if(!e.isDefined(a.kineticable))throw"Collisions can only be tested between Kineticable.";for(d=0,f=b.length;f>d;++d)b.indexOf(a)!==d&&n.overlap(a,b[d],c)},update:function(){}};return n}),glue.module.create("glue/screen",["glue","glue/game"],function(a,b){"use strict";var c=a.sugar;return function(a){var d=[],e=!1,f={addObject:function(a,f){c.isObject(a)&&(d.push(a),e&&b.add(a,function(){c.isFunction(f)&&f()}))},removeObject:function(a,f){var g;c.isObject(a)&&(g=d.indexOf(a),g>=0&&(d.splice(g,1),e&&b.remove(a,function(){c.isFunction(f)&&f()})))},getObjects:function(){return d},getName:function(){return a},setShown:function(a){if(!c.isBoolean(a))throw"Argument is not a boolean";e=a}};return f}}),glue.module.create("glue/spatial",["glue","glue/game","glue/math","glue/math/vector","glue/math/dimension"],function(a,b,c,d){"use strict";return function(){var e,f,g,h=a.sugar,i=(c(),function(a,b){var c=parseInt(Math.floor(a.x/f)+Math.floor(a.y/f)*(e.width/f));h.contains(b,c)||b.push(c)}),j=function(a){var b=[],c=a.spritable.getPosition(),e=a.spritable.getDimension(),f=d(c.x,c.y),g=d(c.x+e.width,c.y+e.height);return i(d(f.x,f.y),b),i(d(g.x,f.y),b),i(d(g.x,g.y),b),i(d(f.x,g.y),b),b},k=function(){var a,b=0;for(g={},a=e.width/f*(e.height/f),b;a>b;++b)g[b]=[]},l={setup:function(a){a=a||{},e=h.isDefined(a.gridDimension)?a.gridDimension:b.canvas.getDimension(),f=h.isDefined(a.gridSize)?a.gridSize:e.height/3,k()},setDebug:function(a){a===!0&&b.add(l),a===!1&&b.remove(l)},clearObjects:function(){k()},addObject:function(a){var b=j(a),c=0,d=b.length;for(c;d>c;++c)g[b[c]].push(a)},addArray:function(a){var b,c;for(b=0,c=a.length;c>b;++b)l.addObject(a[b])},getNearbyObjects:function(a){var b=[],c=j(a),d=0,e=c.length;for(d;e>d;++d)b.push(g[c[d]]);return b},handleNearbyObjects:function(a,b){var c,d,e,f,g;if(h.isFunction(b))for(c=l.getNearbyObjects(a),d=0,e=c.length;e>d;++d)if(c[d])for(f=0,g=c[d].length;g>f;++f)c[d].indexOf(a)!==f&&b(c[d][f])},draw:function(a,b){var c=0,d=0;for(b.save(),b.beginPath(),c;c<=e.width;c+=f)b.moveTo(c,0),b.lineTo(c,e.height);for(d;d<=e.height;d+=f)b.moveTo(0,d),b.lineTo(e.width,d);b.strokeStyle="black",b.stroke(),b.closePath(),b.restore()}};return l}});var modules=modules||{};modules.glue=modules.glue||{},modules.glue.sugar=function(a,b){"use strict";var c=function(a){return m(a.width)&&m(a.height)},d=function(a){return m(a.x)&&m(a.y)},e=function(a){return q(a,"get")&&i(a.get)&&q(a,"set")&&i(a.set)&&q(a,"transpose")&&i(a.transpose)&&q(a,"add")&&i(a.add)&&q(a,"multiply")&&i(a.multiply)?!0:void 0},f=function(a){return"string"==typeof a||a instanceof String},g=Array.prototype.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)},h=function(a){return"[object Object]"===Object.prototype.toString.call(a)},i=function(a){return"[object Function]"===Object.prototype.toString.call(a)},j=function(a,b){var c=a.length;if(c!=b.length)return!1;for(;c--;)if(a[c]!==b[c])return!1;return!0},k=function(b,c){var d,e,f,g,h,i,j,k=[],l=a;for(e=0,g=b.length;g>e;++e){if(l=a,i=b[e].split("."),1===i.length)j=a[i];else for(d=0,f=i.length;f>d;++d)h=i[d],d===f-1?j=l[h]:l[h]&&(l=l[h]);if(!j||!this.isFunction(j))throw"glue.sugar.imports: Module "+b[e]+" not found or not a function";k.push(j)}return c.apply(glue,k)},l=function(){},m=function(a){return"[object Number]"===Object.prototype.toString.call(a)},n=function(a){return a===!0||a===!1||"[object Boolean]"===Object.prototype.toString.call(a)},o=function(a){return"[object Date]"===Object.prototype.toString.call(a)},p=function(a){return parseFloat(a)===parseInt(a,10)&&!isNaN(a)},q=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)},r=function(a){return void 0===a},s=function(a){return void 0!==a},t=function(a){var b;if(""===a||0===a||"0"===a||null===a||a===!1||this.isUndefined(a))return!0;if(this.isArray(a)&&0===a.length)return!0;if(this.isObject(a)){for(b in a)if(this.has(a,b))return!1;return!0}return!1},u=function(a){return"[object Arguments]"===Object.prototype.toString.call(a)},v=function(a,b){return a+Math.floor(Math.random()*(b-a+1))},w=function(a){return a.charAt(0).toUpperCase()+a.slice(1)},x=function(){for(var a=this.toArray(arguments),b=this["is"+this.upperFirst(a.shift())],c=a.length;c--;)if(!b.call(null,a[c]))return!1;return!0},y=function(a,b){var c;if(this.multiIs("array",a,b))return a.concat(b);for(c in b)this.has(b,c)&&(this.has(a,c)&&(a.base=a.base||{},a.base[c]=a[c]),a[c]=this.isObject(b[c])?this.combine({},b[c]):b[c]);return a},z=function(a){return/^\[object (HTMLCollection|NodeList|Object)\]$/.test(toString.call(a))&&this.isNumber(a.length)&&(0===a.length||"object"==typeof a[0]&&a[0].nodeType>0)},A=function(a){var b,c=[];if(!a)return[a];if(this.isArgument(a))return Array.prototype.slice.call(a);if(this.isString(a)&&a.split(""),this.isArray(a))return Array.prototype.slice.call(a);if(this.isDomList(a))return Array.prototype.slice.call(a);for(b in a)this.has(a,b)&&c.push(a[b]);return c},B=function(a,b){return this.isString(a)?-1!==a.indexOf(b)?!0:!1:this.isArray(a)?-1!==this.indexOf(a,b)?!0:!1:this.has(a,b)},C=function(a,b){var c=0;if(null===a)return-1;if(a.indexOf)return a.indexOf(b);for(c=a.length;c--;)if(a[c]===b)return c;return-1},D=function(a){return!(!a||1!==a.nodeType)},E=function(a){var b,c=0;if(!a)return 0;if(this.isObject(a))for(b in a)this.has(a,b)&&++c;return(this.isString(a)||this.isArray(a)||this.isArguments(a))&&(c=a.length),this.isNumber(a)&&(c=a.toString().length),c},F=function(a){return this.combine({},a,!0)},G=function(a){return!(!(a&&a.test&&a.exec)||!a.ignoreCase&&a.ignoreCase!==!1)},H=Object.prototype.keys||function(a){var b,c=[];if(a==Object(a))for(b in a)this.has(a,b)&&(c[c.length]=b);return c},I=function(a){var b=!1;return function(){return b?void 0:(b=!0,a.apply(a,arguments))}},J=function(a,b){var c={};return b=b||function(a){return a},function(){var d=b.apply(null,arguments);return this.has(c,d)?c[d]:c[d]=a.apply(a,arguments)}},K=function(a,b){var c,d;for(c=0,d=a.length;d>c;++c)if(a[c]===b){a.splice(c,1);break}},L=function(c,d,e){var f;return c.style&&this.isEmpty(c.style[d])?c.currentStyle?f=c.currentStyle[d]:a.getComputedStyle&&(f=b.defaultView.getComputedStyle(c,null).getPropertyValue(d)):c.style&&(f=c.style[d]),e?parseFloat(f):f},M=function(a){return typeof a==typeof Function},N=function(a,c,d){var e;return d&&(d.style.display="none"),e=b.elementFromPoint(a,c),e&&this&&this.containsClass(e,"omit")&&(e=N(a,c,e)),d&&(d.style.display=""),e},O=function(a,c,d){var e,f=!1,g=[];for(d&&(d.style.display="none"),f=b.elementFromPoint(a,c);f&&"BODY"!==f.tagName&&"HTML"!==f.tagName;)g.push(f),T(f,"animated"),f.style.display="none",f=b.elementFromPoint(a,c);for(e=0;e<g.length;++e)g[e].style.display="block";return d&&(d.style.display="block"),g},P=function(a,b){return a.getAttribute("data-"+b)},Q=function(a,b,c){return a.setAttribute("data-"+b,c)},R=function(a,c){return(R=b.documentElement.classList?function(a,b){return a.classList.contains(b)}:function(a,b){if(!a||!a.className)return!1;var c=new RegExp("(^|\\s)"+b+"(\\s|$)");return a.className.match(c)})(a,c)},S=function(a,c){var d,e,f=this;return(S=b.documentElement.classList?function(a,b){if(f.isArray(b))for(d=0,e=b.length;e>d;++d)a.classList.add(b[d]);else a.classList.add(b)}:function(a,b){if(!a)return!1;if(!R(a,b))if(f.isArray(b))for(d=0,e=b.length;e>d;++d)a.className+=(a.className?" ":"")+b[d];else a.className+=(a.className?" ":"")+b})(a,c)},T=function(a,c){return(T=b.documentElement.classList?function(a,b){a.classList.remove(b)}:function(a,b){if(!a||!a.className)return!1;var c=new RegExp("(^|\\s)"+b+"(\\s|$)","g");a.className=a.className.replace(c,"$2")})(a,c)},U=function(a){a.className="",a.setAttribute("class","")},V=function(a,c){return(V=b.documentElement.classList&&b.documentElement.classList.toggle?function(a,b){return a.classList.toggle(b)}:function(a,b){return R(a,b)?(T(a,b),!1):(S(a,b),!0)})(a,c)},W=function(a,b){if(document.createEvent){var c=document.createEvent("MouseEvents");return c.initEvent(b,!0,!1),a.dispatchEvent(c),!0}return document.createEventObject?(a.fireEvent("on"+b),!0):"function"==typeof a["on"+b]?(a["on"+b](),!0):!1},X=function(a){return b.querySelector(a)},Y=function(a,b){function c(){var f=(new Date).getTime();f-d>=b?a():e=requestAnimationFrame(c)}var d=(new Date).getTime(),e=null;return void 0===b&&(b=1),c(),{cancel:function(){"undefined"!=typeof cancelAnimationFrame&&cancelAnimationFrame(e)}}},Z=function(a,b,c,d){var e,f,g={start:["animationstart","animationstart","webkitAnimationStart","oanimationstart","MSAnimationStart"],iteration:["animationiteration","animationiteration","webkitAnimationIteration","oanimationiteration","MSAnimationIteration"],end:["animationend","animationend","webkitAnimationEnd","oanimationend","MSAnimationEnd"],tend:["transitionend","transitionend","webkitTransitionEnd","otransitionend","MSTransitionEnd"]},h=g[b]||[],d=d||"add";for(f=0,e=h.length;e>f;++f)"add"===d?a.addEventListener(h[f],c,!1):"remove"===d&&a.removeEventListener(h[f],c,!1)},$=function(c){var d=b.readyState;"complete"===d||"interactive"===d?c():a.addEventListener?a.addEventListener("DOMContentLoaded",c):a.attachEvent("onload",c)},_=function(){var a=function(a,c){return b(a.slice(),c)},b=function(a,b){"function"!=typeof b&&(b=function(a,b){return String(a).localeCompare(b)});var d=a.length;if(1>=d)return a;for(var e=new Array(d),f=1;d>f;f*=2){c(a,b,f,e);var g=a;a=e,e=g}return a},c=function(a,b,c,d){var e,f,g,h,i,j=a.length,k=0,l=2*c;for(e=0;j>e;e+=l)for(f=e+c,g=f+c,f>j&&(f=j),g>j&&(g=j),h=e,i=f;;)if(f>h&&g>i)d[k++]=b(a[h],a[i])<=0?a[h++]:a[i++];else if(f>h)d[k++]=a[h++];else{if(!(g>i))break;d[k++]=a[i++]}};return a.inplace=function(a,d){var e=b(a,d);return e!==a&&c(e,null,a.length,a),a},a}();return Object.prototype.hasOwnProperty||(Object.prototype.hasOwnProperty=function(a){var b=obj.__proto__||obj.constructor.prototype;return a in this&&(!(a in b)||b[a]!==this[a])}),function(){for(var a=0,b=["ms","moz","webkit","o"],c=window,d=0;d<b.length&&!c.requestAnimationFrame;++d)c.requestAnimationFrame=c[b[d]+"RequestAnimationFrame"],c.cancelAnimationFrame=c[b[d]+"CancelAnimationFrame"]||c[b[d]+"CancelRequestAnimationFrame"];c.requestAnimationFrame||(c.requestAnimationFrame=function(b){var d=(new Date).getTime(),e=Math.max(0,16-(d-a)),f=c.setTimeout(function(){b(d+e)},e);return a=d+e,f}),c.cancelAnimationFrame||(c.cancelAnimationFrame=function(a){clearTimeout(a)})}(),CanvasRenderingContext2D.prototype.clear=CanvasRenderingContext2D.prototype.clear||function(a){a&&(this.save(),this.setTransform(1,0,0,1,0,0)),this.clearRect(0,0,this.canvas.width,this.canvas.height),a&&this.restore()},{isVector:d,isDimension:c,isMatrix:e,isString:f,isArray:g,isObject:h,isFunction:i,emptyFn:l,isNumber:m,isBoolean:n,isDate:o,isInt:p,has:q,isUndefined:r,isDefined:s,isEmpty:t,isArgument:u,getRandom:v,upperFirst:w,multiIs:x,combine:y,imports:k,isDomList:z,toArray:A,contains:B,indexOf:C,isElement:D,size:E,clone:F,isRegex:G,keys:H,once:I,memoize:J,removeObject:K,getStyle:L,isFunctionByType:M,getNodeOnPoint:N,getNodesOnPoint:O,getData:P,setData:Q,containsClass:R,addClass:S,removeClass:T,removeClasses:U,toggleClass:V,triggerEvent:W,$:X,setAnimationFrameTimeout:Y,animationEvent:Z,domReady:$,arrayMatch:j,sort:{stable:_}}}(window,window.document),glue.module.create("glue/domready",function(){"use strict";function a(a){var b;for(b=0;b<a.length;b+=1)a[b](j)}function b(){var b=k;i&&b.length&&(k=[],a(b))}function c(){i||(i=!0,g&&clearInterval(g),b())}function d(a){return i?a(j):k.push(a),d}var e,f,g,h="undefined"!=typeof window&&window.document,i=!h,j=h?document:null,k=[];if(h){if(document.addEventListener)document.addEventListener("DOMContentLoaded",c,!1),window.addEventListener("load",c,!1);else if(window.attachEvent){window.attachEvent("onload",c),f=document.createElement("div");try{e=null===window.frameElement}catch(l){}f.doScroll&&e&&window.external&&(g=setInterval(function(){try{f.doScroll(),c()}catch(a){}},30))}"complete"===document.readyState&&c()}return d.version="2.0.1",d.load=function(a,b,c,e){e.isBuild?c(null):d(c)},d});